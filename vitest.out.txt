
 RUN  v2.1.9 /Users/ghogue/Library/CloudStorage/OneDrive-InsightfulOutcomes,LLC/IS-LTD/APPS/CaliberVaultII
      Coverage enabled with v8

stdout | src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > FirearmsService > should create firearm using createFirearm
[firearm_detailsService] Creating: {
  baseData: {
    name: 'Test Rifle',
    manufacturer_id: 'mfg123',
    model: 'TR-15',
    quantity: 1,
    purchase_date: undefined,
    purchase_price: undefined,
    current_value: undefined,
    storage_location_id: undefined,
    notes: undefined,
    image_url: undefined
  },
  detailData: {
    firearm_type_id: undefined,
    serial_number: '123456',
    caliber_id: 'cal123',
    cartridge_id: undefined,
    barrel_length: undefined,
    overall_length: undefined,
    weight: undefined,
    capacity: undefined,
    action_id: undefined,
    finish: undefined,
    round_count: undefined,
    is_nfa: undefined,
    nfa_item_type: undefined,
    form_4_approved_date: undefined,
    tax_stamp_number: undefined
  }
}

stdout | src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > AmmunitionService > should create ammunition using createAmmunition
[ammunition_detailsService] Creating: {
  baseData: {
    name: 'Test Ammo',
    manufacturer_id: 'mfg123',
    model: undefined,
    quantity: 1,
    purchase_date: undefined,
    purchase_price: undefined,
    current_value: undefined,
    storage_location_id: undefined,
    notes: undefined,
    image_url: undefined
  },
  detailData: {
    caliber_id: 'cal123',
    cartridge_id: undefined,
    bullet_type_id: undefined,
    bullet_weight: undefined,
    muzzle_velocity: undefined,
    rounds_per_box: undefined,
    is_reloaded: undefined,
    brass_condition: undefined
  }
}

stdout | src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > OpticsService > should create optic using createOptic
[optic_detailsService] Creating: {
  baseData: {
    name: 'Test Scope',
    quantity: 1,
    purchase_date: undefined,
    purchase_price: undefined,
    current_value: undefined,
    storage_location_id: undefined,
    notes: undefined,
    image_url: undefined
  },
  detailData: {
    manufacturer_id: 'mfg123',
    model: 'SC-4X',
    magnification: '4x',
    objective_lens: undefined,
    reticle_type_id: undefined,
    turret_type_id: undefined,
    mounting_type_id: undefined,
    fov_id: undefined
  }
}

 â†“ src/test/integration/data-migration.test.ts > Data Migration Validation > should have ammunition table with correct schema
 â†“ src/test/integration/data-migration.test.ts > Data Migration Validation > should have bullets table with correct schema
 â†“ src/test/integration/data-migration.test.ts > Data Migration Validation > should have magazines table
 â†“ src/test/integration/data-migration.test.ts > Data Migration Validation > should have accessories table
 â†“ src/test/integration/data-migration.test.ts > Data Migration Validation > should fetch all categories from categories table
 â†“ src/test/integration/data-migration.test.ts > Data Migration Validation > should create ammunition item successfully
 â†“ src/test/integration/data-migration.test.ts > Data Migration Validation > should create magazine item successfully
 Ã— src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Barcode Validation > validates UPC-A format (12 digits)
   â†’ BarcodeService.getInstance is not a function
 Ã— src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Barcode Validation > validates UPC-E format (13 digits)
   â†’ BarcodeService.getInstance is not a function
 Ã— src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Barcode Validation > rejects invalid UPC formats
   â†’ BarcodeService.getInstance is not a function
 Ã— src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Barcode Validation > validates EAN-13 format
   â†’ BarcodeService.getInstance is not a function
 Ã— src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Barcode Validation > rejects invalid EAN formats
   â†’ BarcodeService.getInstance is not a function
 Ã— src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Barcode Validation > detects barcode types correctly
   â†’ BarcodeService.getInstance is not a function
 Ã— src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Offline Mode > handles offline barcode lookup gracefully
   â†’ BarcodeService.getInstance is not a function
 Ã— src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Offline Mode > returns cache miss when barcode not cached
   â†’ BarcodeService.getInstance is not a function
 Ã— src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > API Usage Tracking > tracks API call count
   â†’ BarcodeService.getInstance is not a function
 Ã— src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > API Usage Tracking > resets API counter
   â†’ BarcodeService.getInstance is not a function
 Ã— src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Cache Management > gets cache statistics
   â†’ BarcodeService.getInstance is not a function
 Ã— src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Cache Management > clears cache
   â†’ BarcodeService.getInstance is not a function
 Ã— src/services/inventory/__tests__/BatchOperationsService.test.ts > BatchOperationsService > bulkCreate > should create multiple items successfully
   â†’ [vitest] No "ammunitionService" export is defined on the "../../category" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 Ã— src/services/inventory/__tests__/BatchOperationsService.test.ts > BatchOperationsService > bulkCreate > should handle partial failures
   â†’ [vitest] No "ammunitionService" export is defined on the "../../category" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 Ã— src/services/inventory/__tests__/BatchOperationsService.test.ts > BatchOperationsService > bulkDelete > should delete multiple items
   â†’ [vitest] No "ammunitionService" export is defined on the "../../category" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 Ã— src/services/inventory/__tests__/BatchOperationsService.test.ts > BatchOperationsService > bulkDuplicate > should duplicate items
   â†’ [vitest] No "ammunitionService" export is defined on the "../../category" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 Ã— src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > saveItem > saves firearm item successfully
   â†’ Cannot read properties of null (reading 'id')
 Ã— src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > saveItem > saves ammunition item successfully
   â†’ Cannot read properties of null (reading 'id')
 âœ“ src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > saveItem > throws error for invalid category
 Ã— src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > getItems > retrieves all items for user
   â†’ expected [] to deeply equal [ â€¦(2) ]
 âœ“ src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > getItems > returns empty array when no items found
 âœ“ src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > updateItem > updates item successfully
 âœ“ src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > valuation methods > saves valuation successfully
 âœ“ src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > valuation methods > gets valuation history
 âœ“ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > FirearmsService > should create firearm using createFirearm
 âœ“ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > FirearmsService > should update firearm using updateFirearm
 âœ“ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > FirearmsService > should delete firearm
 âœ“ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > FirearmsService > should get firearm by id
 âœ“ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > AmmunitionService > should create ammunition using createAmmunition
 âœ“ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > AmmunitionService > should update ammunition using updateAmmunition
 âœ“ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > AmmunitionService > should delete ammunition
 âœ“ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > OpticsService > should create optic using createOptic
 âœ“ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > OpticsService > should update optic using updateOptic
 âœ“ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > OpticsService > should delete optic
 Ã— src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > returns all items when no filters applied
   â†’ Target cannot be null or undefined.
 Ã— src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > filters by category
   â†’ Target cannot be null or undefined.
 Ã— src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > filters by search query
   â†’ Target cannot be null or undefined.
 Ã— src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > filters by caliber
   â†’ Target cannot be null or undefined.
 Ã— src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > returns unique calibers
   â†’ expected undefined to deeply equal [ '5.56mm', '9mm' ]
 Ã— src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > returns unique manufacturers
   â†’ expected undefined to deeply equal [ 'Ammo Co', 'Test Mfg' ]
 Ã— src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > calculates max price correctly
   â†’ expected undefined to be 1000 // Object.is equality
 Ã— src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > handles empty inventory gracefully
   â†’ Target cannot be null or undefined.
 Ã— src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > filters with advanced price range
   â†’ Target cannot be null or undefined.
 Ã— src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > calculates active filter count
   â†’ actual value must be number or bigint, received "undefined"
stdout | src/test/integration/comprehensive-categories.test.ts > Comprehensive Category Integration Tests > Firearms Service Integration > creates firearm with all fields
[firearm_detailsService] Creating: {
  baseData: {
    name: 'Test Rifle',
    manufacturer: 'Test Mfg',
    model: 'TR-15',
    caliber: '5.56mm',
    serial_number: 'TEST123',
    action_type: 'Semi-Auto',
    barrel_length: 16,
    overall_length: 36,
    weight: 7.5,
    capacity: 30
  },
  detailData: undefined
}

stdout | src/test/integration/comprehensive-categories.test.ts > Comprehensive Category Integration Tests > Ammunition Service Integration > creates ammunition with specifications
[ammunition_detailsService] Creating: {
  baseData: {
    name: 'Test Ammo',
    manufacturer: 'Test Ammo Co',
    caliber: '5.56mm',
    grain_weight: 55,
    bullet_type: 'FMJ',
    quantity: 1000,
    rounds_per_box: 20
  },
  detailData: undefined
}

 âœ“ src/services/__tests__/team.service.test.ts > TeamService > should create team
 âœ“ src/services/__tests__/team.service.test.ts > TeamService > should add team member
 âœ“ src/services/__tests__/team.service.test.ts > TeamService > should list team members
 âœ“ src/services/__tests__/team.service.test.ts > TeamService > should remove team member
 âœ“ src/services/__tests__/team.service.test.ts > TeamService > should get teams
 âœ“ src/services/__tests__/team.service.test.ts > TeamService > should update team
 âœ“ src/services/__tests__/team.service.test.ts > TeamService > should delete team
 Ã— src/test/integration/comprehensive-categories.test.ts > Comprehensive Category Integration Tests > Firearms Service Integration > creates firearm with all fields
   â†’ withErrorHandling is not a function
 Ã— src/test/integration/comprehensive-categories.test.ts > Comprehensive Category Integration Tests > Ammunition Service Integration > creates ammunition with specifications
   â†’ withErrorHandling is not a function
 âœ“ src/test/integration/comprehensive-categories.test.ts > Comprehensive Category Integration Tests > Cross-Category Operations > links firearm with compatible ammunition
 Ã— src/test/integration/api.test.ts > API Integration Tests > REST API Endpoints > fetches inventory items via API
   â†’ apiService.getAll is not a function
 Ã— src/test/integration/api.test.ts > API Integration Tests > REST API Endpoints > creates item via API
   â†’ expected { success: false, â€¦(1) } to deeply equal { name: 'New Item', â€¦(1) }
 Ã— src/test/integration/api.test.ts > API Integration Tests > REST API Endpoints > handles API errors gracefully
   â†’ apiService.getAll is not a function
 Ã— src/test/integration/api.test.ts > API Integration Tests > Real-time Subscriptions > subscribes to inventory changes
   â†’ Cannot read properties of undefined (reading 'mockReturnValue')
 Ã— src/test/integration/api.test.ts > API Integration Tests > Batch Operations > performs batch insert
   â†’ apiService.batchCreate is not a function
 âœ“ src/services/__tests__/barcode.service.test.ts > BarcodeService > should validate UPC format
 âœ“ src/services/__tests__/barcode.service.test.ts > BarcodeService > should validate EAN format
 âœ“ src/services/__tests__/barcode.service.test.ts > BarcodeService > should detect barcode type
 âœ“ src/services/__tests__/barcode.service.test.ts > BarcodeService > should track API usage
 âœ“ src/services/__tests__/barcode.service.test.ts > BarcodeService > should reset API counter
stdout | src/services/__tests__/sync.service.test.ts > SyncService > should process queue successfully
[SyncService] Sync complete: { success: 0, failed: 0, conflicts: 0 }

 âœ“ src/services/__tests__/sync.service.test.ts > SyncService > should process queue successfully
 âœ“ src/services/__tests__/sync.service.test.ts > SyncService > should subscribe to sync status updates
 âœ“ src/services/__tests__/sync.service.test.ts > SyncService > should not process queue if already processing
stdout | src/services/__tests__/sync.service.test.ts > SyncService > should not process queue if already processing
[SyncService] Sync already in progress

 âœ“ src/lib/__tests__/barcodeCache.test.ts > BarcodeCacheManager > initializes cache manager
 âœ“ src/lib/__tests__/barcodeCache.test.ts > BarcodeCacheManager > caches barcode data
 âœ“ src/lib/__tests__/barcodeCache.test.ts > BarcodeCacheManager > retrieves cached data
 âœ“ src/lib/__tests__/barcodeCache.test.ts > BarcodeCacheManager > returns null for non-existent barcode
 âœ“ src/lib/__tests__/barcodeCache.test.ts > BarcodeCacheManager > clears all cache
 âœ“ src/services/inventory/__tests__/ModalIntegrationService.test.ts > ModalIntegrationService > saveItem > should route firearms to firearmsService
 âœ“ src/services/inventory/__tests__/ModalIntegrationService.test.ts > ModalIntegrationService > saveItem > should route ammunition to ammunitionService
 âœ“ src/services/inventory/__tests__/ModalIntegrationService.test.ts > ModalIntegrationService > updateItem > should update firearms correctly
stdout | src/services/__tests__/categoryServices.test.ts > FirearmsService > should create a firearm using createFirearm method
[firearm_detailsService] Creating: {
  baseData: {
    name: 'Test Rifle',
    manufacturer_id: 'mfg123',
    model: 'TR-15',
    quantity: 1,
    purchase_date: undefined,
    purchase_price: undefined,
    current_value: undefined,
    storage_location_id: undefined,
    notes: undefined,
    image_url: undefined
  },
  detailData: {
    firearm_type_id: undefined,
    serial_number: '123456',
    caliber_id: 'cal123',
    cartridge_id: undefined,
    barrel_length: undefined,
    overall_length: undefined,
    weight: undefined,
    capacity: undefined,
    action_id: undefined,
    finish: undefined,
    round_count: undefined,
    is_nfa: undefined,
    nfa_item_type: undefined,
    form_4_approved_date: undefined,
    tax_stamp_number: undefined
  }
}

stdout | src/services/__tests__/categoryServices.test.ts > AmmunitionService > should create ammunition using createAmmunition method
[ammunition_detailsService] Creating: {
  baseData: {
    name: 'Test Ammo',
    manufacturer_id: 'mfg123',
    model: undefined,
    quantity: 1,
    purchase_date: undefined,
    purchase_price: undefined,
    current_value: undefined,
    storage_location_id: undefined,
    notes: undefined,
    image_url: undefined
  },
  detailData: {
    caliber_id: 'cal123',
    cartridge_id: undefined,
    bullet_type_id: undefined,
    bullet_weight: undefined,
    muzzle_velocity: undefined,
    rounds_per_box: undefined,
    is_reloaded: undefined,
    brass_condition: undefined
  }
}

 Ã— src/services/__tests__/categoryServices.test.ts > FirearmsService > should create a firearm using createFirearm method
   â†’ Failed to create inventory item: undefined
 Ã— src/services/__tests__/categoryServices.test.ts > FirearmsService > should update a firearm using updateFirearm method
   â†’ supabase.from(...).update is not a function
 Ã— src/services/__tests__/categoryServices.test.ts > AmmunitionService > should create ammunition using createAmmunition method
   â†’ Failed to create inventory item: undefined
 âœ“ src/services/__tests__/inventory.service.test.ts > InventoryService > should save firearm item
 âœ“ src/services/__tests__/inventory.service.test.ts > InventoryService > should handle lowercase category names
stdout | src/services/category/__tests__/FirearmsService.test.ts > FirearmsService > should create firearm with correct fields
[firearm_detailsService] Creating: {
  baseData: { name: 'Test Rifle', manufacturer_id: 'mfg-123' },
  detailData: { serial_number: '123456', caliber_id: 'cal-123' }
}

stdout | src/services/category/__tests__/FirearmsService.test.ts > FirearmsService > should handle serial numbers
[firearm_detailsService] Creating: {
  baseData: { name: 'Test Pistol' },
  detailData: { serial_number: 'ABC123' }
}

stdout | src/services/category/__tests__/AmmunitionService.test.ts > AmmunitionService > createAmmunition > should create ammunition with correct fields
[ammunition_detailsService] Creating: {
  baseData: { name: 'Test Ammo', manufacturer_id: 'mfg-456' },
  detailData: { caliber_id: 'cal-456', bullet_weight: 115 }
}

stdout | src/services/category/__tests__/AmmunitionService.test.ts > AmmunitionService > createAmmunition > should handle bullet weight
[ammunition_detailsService] Creating: { baseData: { name: 'Test Ammo' }, detailData: { bullet_weight: 115 } }

 âœ“ src/utils/__tests__/csvValidator.test.ts > csvValidator > validateCSVRow > validates row with all required fields
 âœ“ src/utils/__tests__/csvValidator.test.ts > csvValidator > validateCSVRow > rejects row with missing required fields
 âœ“ src/utils/__tests__/csvValidator.test.ts > csvValidator > validateCSVRow > validates numeric fields
 âœ“ src/utils/__tests__/csvValidator.test.ts > csvValidator > validateCSVHeaders > validates correct headers
 âœ“ src/utils/__tests__/csvValidator.test.ts > csvValidator > validateCSVHeaders > rejects missing required headers
 Ã— src/services/category/__tests__/AmmunitionService.test.ts > AmmunitionService > createAmmunition > should create ammunition with correct fields
   â†’ Failed to create inventory item: undefined
 Ã— src/services/category/__tests__/AmmunitionService.test.ts > AmmunitionService > createAmmunition > should handle bullet weight
   â†’ Failed to create inventory item: undefined
 Ã— src/services/category/__tests__/FirearmsService.test.ts > FirearmsService > should create firearm with correct fields
   â†’ Failed to create inventory item: undefined
 Ã— src/services/category/__tests__/FirearmsService.test.ts > FirearmsService > should handle serial numbers
   â†’ Failed to create inventory item: undefined
 âœ“ src/components/__tests__/AIValuationModal.test.tsx > AIValuationModal Tests > renders valuation modal
 âœ“ src/components/__tests__/AIValuationModal.test.tsx > AIValuationModal Tests > handles modal close
 âœ“ src/services/category/__tests__/AllCategories.test.ts > All Category Services > firearms service is defined
 âœ“ src/services/category/__tests__/AllCategories.test.ts > All Category Services > ammunition service is defined
 âœ“ src/services/category/__tests__/AllCategories.test.ts > All Category Services > optics service is defined
 âœ“ src/services/category/__tests__/AllCategories.test.ts > All Category Services > all services have create method
 âœ“ src/services/__tests__/reference.service.test.ts > ReferenceDataService > getManufacturers > fetches manufacturers
 âœ“ src/services/__tests__/reference.service.test.ts > ReferenceDataService > getCalibers > fetches calibers
 Ã— src/services/__tests__/reference.service.test.ts > ReferenceDataService > addManufacturer > adds new manufacturer
   â†’ service.addManufacturer is not a function
 Ã— src/services/__tests__/storage.service.test.ts > StorageService > uploadFile > uploads file successfully
   â†’ StorageService is not a constructor
 Ã— src/services/__tests__/storage.service.test.ts > StorageService > deleteFile > deletes file successfully
   â†’ StorageService is not a constructor
 Ã— src/services/__tests__/storage.service.test.ts > StorageService > listFiles > lists files successfully
   â†’ StorageService is not a constructor
 Ã— src/lib/__tests__/validation.test.ts > validation utilities > validateEmail > validates correct email
   â†’ validateEmail is not a function
 Ã— src/lib/__tests__/validation.test.ts > validation utilities > validateEmail > rejects invalid email
   â†’ validateEmail is not a function
 Ã— src/lib/__tests__/validation.test.ts > validation utilities > validatePhone > validates US phone number
   â†’ validatePhone is not a function
 Ã— src/lib/__tests__/validation.test.ts > validation utilities > validatePhone > rejects invalid phone
   â†’ validatePhone is not a function
 Ã— src/lib/__tests__/validation.test.ts > validation utilities > validateURL > validates correct URL
   â†’ validateURL is not a function
 Ã— src/lib/__tests__/validation.test.ts > validation utilities > validateURL > rejects invalid URL
   â†’ validateURL is not a function
 Ã— src/lib/__tests__/validation.test.ts > validation utilities > validateRequired > validates non-empty value
   â†’ validateRequired is not a function
 Ã— src/lib/__tests__/validation.test.ts > validation utilities > validateRequired > rejects empty value
   â†’ validateRequired is not a function
 âœ“ src/utils/__tests__/csvParser.test.ts > csvParser > parseCSV > parses valid CSV data
 âœ“ src/utils/__tests__/csvParser.test.ts > csvParser > parseCSV > handles empty CSV
 âœ“ src/utils/__tests__/csvParser.test.ts > csvParser > parseCSV > handles CSV with headers only
 âœ“ src/utils/__tests__/csvParser.test.ts > csvParser > parseCSV > handles quoted values
 âœ“ src/utils/__tests__/csvParser.test.ts > csvParser > generateCSVTemplate > generates template with headers
 âœ“ src/lib/__tests__/formatters.test.ts > formatters > formatCurrency > formats USD currency
 âœ“ src/lib/__tests__/formatters.test.ts > formatters > formatCurrency > handles zero
 âœ“ src/lib/__tests__/formatters.test.ts > formatters > formatCurrency > handles negative values
 âœ“ src/lib/__tests__/formatters.test.ts > formatters > formatDate > formats date string
 âœ“ src/lib/__tests__/formatters.test.ts > formatters > formatDate > handles invalid date
 âœ“ src/lib/__tests__/formatters.test.ts > formatters > formatNumber > formats large numbers with commas
 âœ“ src/lib/__tests__/formatters.test.ts > formatters > formatNumber > handles decimals
 âœ“ src/lib/__tests__/formatters.test.ts > formatters > formatPercentage > formats percentage
 âœ“ src/utils/__tests__/barcodeUtils.test.ts > barcodeUtils > validateUPC > validates correct UPC-A codes
 âœ“ src/utils/__tests__/barcodeUtils.test.ts > barcodeUtils > validateUPC > rejects invalid UPC codes
 âœ“ src/utils/__tests__/barcodeUtils.test.ts > barcodeUtils > validateUPC > rejects UPC with wrong check digit
 âœ“ src/utils/__tests__/barcodeUtils.test.ts > barcodeUtils > formatBarcode > formats barcode with spaces
 âœ“ src/utils/__tests__/barcodeUtils.test.ts > barcodeUtils > formatBarcode > handles empty input
 âœ“ src/utils/__tests__/barcodeUtils.test.ts > barcodeUtils > generateCheckDigit > generates correct check digit
 Ã— src/services/api/__tests__/InventoryAPIService.test.ts > InventoryAPIService > fetches inventory items
   â†’ apiService.getItems is not a function
 Ã— src/services/api/__tests__/InventoryAPIService.test.ts > InventoryAPIService > creates new item via API
   â†’ apiService.createItem is not a function
 âœ“ src/services/api/__tests__/InventoryAPIService.test.ts > InventoryAPIService > handles API errors
 Ã— src/hooks/__tests__/useInventoryFilters.enhanced.test.ts > useInventoryFilters Enhanced > handles complex filter combinations
   â†’ expected undefined to be 'firearms' // Object.is equality
 Ã— src/hooks/__tests__/useInventoryFilters.enhanced.test.ts > useInventoryFilters Enhanced > persists filter state
   â†’ expected undefined to be 'ammunition' // Object.is equality
 âœ“ src/hooks/__tests__/useSubscription.test.ts > useSubscription > returns subscription data
 Ã— src/hooks/__tests__/useSubscription.test.ts > useSubscription > checks feature availability
   â†’ result.current.hasFeature is not a function
 Ã— src/hooks/__tests__/useSubscription.test.ts > useSubscription > returns tier limits
   â†’ actual value must be number or bigint, received "undefined"
 Ã— src/components/__tests__/ItemCard.test.tsx > ItemCard Component > renders item information
   â†’ safeNumber is not a function
 Ã— src/components/__tests__/ItemCard.test.tsx > ItemCard Component > accepts callback functions
   â†’ safeNumber is not a function
 âœ“ src/components/__tests__/FeedbackSystem.test.tsx > FeedbackSystem > renders feedback modal
 âœ“ src/components/__tests__/FeedbackSystem.test.tsx > FeedbackSystem > handles feedback submission
 âœ“ src/services/security/__tests__/SecurityService.test.ts > SecurityService > logSecurityEvent > logs security event successfully
 âœ“ src/services/security/__tests__/SecurityService.test.ts > SecurityService > checkPermission > checks user permission
 âœ“ src/components/__tests__/PhotoCapture.test.tsx > PhotoCapture > mounts and tears down camera cleanly
 âœ“ src/services/__tests__/reports.service.test.ts > ReportService > should generate inventory summary report
 âœ“ src/services/__tests__/reports.service.test.ts > ReportService > should generate category breakdown report
 âœ“ src/services/__tests__/reports.service.test.ts > ReportService > should generate value report
stdout | src/hooks/__tests__/useOfflineSync.test.ts > useOfflineSync > handles offline mode
[SyncService] Sync already in progress

stdout | src/hooks/__tests__/useOfflineSync.test.ts > useOfflineSync > queues offline changes
[SyncService] Sync already in progress

 âœ“ src/hooks/__tests__/useOfflineSync.test.ts > useOfflineSync > initializes sync state
 âœ“ src/hooks/__tests__/useOfflineSync.test.ts > useOfflineSync > handles offline mode
 Ã— src/hooks/__tests__/useOfflineSync.test.ts > useOfflineSync > queues offline changes
   â†’ expected undefined to be defined
 âœ“ src/components/__tests__/DatabaseMigrationSystem.test.tsx > DatabaseMigrationSystem > renders migration system
 âœ“ src/components/__tests__/DatabaseMigrationSystem.test.tsx > DatabaseMigrationSystem > handles migration operations
 âœ“ src/components/__tests__/EnhancedBulkImport.test.tsx > EnhancedBulkImport > renders bulk import component
 âœ“ src/components/__tests__/EnhancedBulkImport.test.tsx > EnhancedBulkImport > handles file upload
 Ã— src/components/__tests__/TierEnforcement.test.tsx > TierEnforcement > renders feature guard
   â†’ useNavigate() may be used only in the context of a <Router> component.
 Ã— src/components/__tests__/TierEnforcement.test.tsx > TierEnforcement > enforces tier limits
   â†’ useNavigate() may be used only in the context of a <Router> component.
 âœ“ src/components/__tests__/MobileBarcodeScanner.test.tsx > MobileBarcodeScanner > renders barcode scanner
 âœ“ src/components/__tests__/MobileBarcodeScanner.test.tsx > MobileBarcodeScanner > handles scan callback
 âœ“ src/lib/__tests__/errorHandler.test.ts > ErrorHandler > handles errors gracefully
 âœ“ src/lib/__tests__/errorHandler.test.ts > ErrorHandler > logs errors
 âœ“ src/lib/__tests__/errorHandler.test.ts > ErrorHandler > categorizes errors
 Ã— src/components/__tests__/InventoryOperations.test.tsx > InventoryOperations > renders inventory dashboard
   â†’ Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.
 Ã— src/components/__tests__/InventoryOperations.test.tsx > InventoryOperations > handles inventory operations
   â†’ Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.
 âœ“ src/hooks/__tests__/usePullToRefresh.test.ts > usePullToRefresh > initializes pull to refresh
 âœ“ src/hooks/__tests__/usePullToRefresh.test.ts > usePullToRefresh > handles refresh callback
 âœ“ src/hooks/__tests__/usePullToRefresh.test.ts > usePullToRefresh > tracks pull state
 âœ“ src/__tests__/smoke.test.ts > smoke > runs
 âœ“ src/components/__tests__/SyncStatusDashboard.test.tsx > SyncStatusDashboard > renders sync dashboard
 âœ“ src/components/__tests__/SyncStatusDashboard.test.tsx > SyncStatusDashboard > displays sync status
 âœ“ src/hooks/__tests__/useSwipeGesture.test.ts > useSwipeGesture > initializes swipe gesture
 âœ“ src/hooks/__tests__/useSwipeGesture.test.ts > useSwipeGesture > handles swipe callback
 âœ“ src/hooks/__tests__/useSwipeGesture.test.ts > useSwipeGesture > detects swipe direction
 âœ“ src/components/__tests__/SmartInstallPrompt.test.tsx > SmartInstallPrompt > renders install prompt
 Ã— src/components/__tests__/SmartInstallPrompt.test.tsx > SmartInstallPrompt > handles PWA install
   â†’ expected null to be truthy
stdout | src/components/__tests__/AddItemModal.enhanced.test.tsx > AddItemModal Enhanced > renders modal with all features
=== FETCHING REFERENCE DATA ===
Category: firearms

stdout | src/components/__tests__/AddItemModal.enhanced.test.tsx > AddItemModal Enhanced > handles form validation
=== FETCHING REFERENCE DATA ===
Category: firearms

stdout | src/components/__tests__/AddItemModal.enhanced.test.tsx > AddItemModal Enhanced > supports all categories
=== FETCHING REFERENCE DATA ===
Category: firearms

 âœ“ src/components/__tests__/AddItemModal.enhanced.test.tsx > AddItemModal Enhanced > renders modal with all features
 âœ“ src/components/__tests__/AddItemModal.enhanced.test.tsx > AddItemModal Enhanced > handles form validation
 âœ“ src/components/__tests__/AddItemModal.enhanced.test.tsx > AddItemModal Enhanced > supports all categories
stdout | src/components/__tests__/AddItemModal.test.tsx > AddItemModal > should render when open
=== FETCHING REFERENCE DATA ===
Category: firearms

stdout | src/components/__tests__/AddItemModal.test.tsx > AddItemModal > should not render when closed
=== FETCHING REFERENCE DATA ===
Category: firearms

stdout | src/components/__tests__/AddItemModal.test.tsx > AddItemModal > should render modal component
=== FETCHING REFERENCE DATA ===
Category: firearms

 âœ“ src/components/__tests__/AddItemModal.test.tsx > AddItemModal > should render when open
 Ã— src/components/__tests__/AddItemModal.test.tsx > AddItemModal > should not render when closed
   â†’ expect(element).not.toBeInTheDocument()

expected document not to contain element, found <div
  class="fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-2 overflow-y-auto"
  role="dialog"
>
  <div
    class="bg-slate-800 rounded-xl max-w-4xl w-full p-4 my-4 max-h-[95vh] overflow-y-auto shadow-2xl"
  >
    <div
      class="flex justify-between items-center mb-3 pb-2 border-b border-slate-700"
    >
      <h2
        class="text-2xl font-bold text-white"
      >
        Add New Item
      </h2>
    </div>
    <form
      class="space-y-6"
    >
      <div
        class="text-center py-8"
      >
        <div
          class="text-red-400 mb-4"
        >
          Failed to load form data. Please try refreshing the page.
        </div>
        <button
          class="px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg transition"
        >
          Retry
        </button>
      </div>
      <div
        class="border-t border-slate-700 pt-6"
      >
        <label
          class="block text-slate-300 mb-2 font-medium text-lg"
        >
          Item Description
        </label>
        <textarea
          class="w-full p-4 bg-slate-900 text-white rounded-lg border-2 border-slate-700 focus:border-yellow-500 text-base"
          placeholder="Enter a detailed description..."
          rows="4"
        />
      </div>
      <div
        class="border-t border-slate-700 pt-6"
      >
        <label
          class="block text-slate-300 mb-3 font-medium text-lg"
        >
          Photos (Optional)
        </label>
        <div
          class="flex gap-3 mb-3"
        >
          <button
            class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-all"
            type="button"
          >
            Take Photo
          </button>
        </div>
        <div
          class="space-y-4"
        >
          <div
            class="border-4 border-dashed border-blue-500 rounded-lg p-8 bg-blue-950/30"
          >
            <input
              accept="image/*"
              capture="environment"
              class="hidden"
              id="direct-camera-input"
              type="file"
            />
            <label
              class="block"
              for="direct-camera-input"
            >
              <button
                class="w-full bg-blue-600 hover:bg-blue-700 text-white py-8 text-xl font-bold"
                type="button"
              >
                <span
                  class="cursor-pointer flex items-center justify-center gap-3"
                >
                  <svg
                    class="lucide lucide-camera h-8 w-8"
                    fill="none"
                    height="24"
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    viewBox="0 0 24 24"
                    width="24"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path â€¦ />
                    <circle â€¦ />
                  </svg>
                  ğŸ“¸ Take Photo (
                  0
                  /
                  10
                  )
                </span>
              </button>
            </label>
            <p
              class="text-center text-sm text-slate-400 mt-3"
            >
              Tap button â†’ Take/Select photo â†’ Photo auto-saves
            </p>
          </div>
        </div>
      </div>
      <div
        class="flex gap-4 pt-6 border-t border-slate-700"
      >
        <button
          class="flex-1 bg-gradient-to-r from-yellow-600 to-yellow-500 hover:from-yellow-700 hover:to-yellow-600 text-white font-bold py-4 rounded-lg transition-all transform hover:scale-105 text-lg shadow-lg"
          type="submit"
        >
          Add Item
        </button>
        <button
          class="px-8 bg-slate-700 hover:bg-slate-600 text-white font-semibold rounded-lg transition-all text-lg"
          type="button"
        >
          Cancel
        </button>
      </div>
    </form>
  </div>
</div> instead
 âœ“ src/components/__tests__/AddItemModal.test.tsx > AddItemModal > should render modal component
 âœ“ src/components/__tests__/FilterPanel.test.tsx > FilterPanel Component > renders filter panel
 âœ“ src/components/__tests__/FilterPanel.test.tsx > FilterPanel Component > accepts filter changes

â¯â¯â¯â¯â¯â¯ Unhandled Errors â¯â¯â¯â¯â¯â¯

Vitest caught 3 unhandled errors during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯
 Test Files  50 failed | 27 passed (77)
      Tests  70 failed | 111 passed | 7 skipped (188)
     Errors  3 errors
   Start at  19:26:39
   Duration  23.56s (transform 1.89s, setup 34.89s, collect 22.49s, tests 848ms, environment 63.08s, prepare 9.08s)

