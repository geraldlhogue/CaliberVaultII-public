
 RUN  v2.1.9 /Users/ghogue/Library/CloudStorage/OneDrive-InsightfulOutcomes,LLC/IS-LTD/APPS/CaliberVaultII

 × src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Barcode Validation > validates UPC-A format (12 digits)
   → [vitest] No "BarcodeService" export is defined on the "@/services/barcode/BarcodeService" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Barcode Validation > validates UPC-E format (13 digits)
   → [vitest] No "BarcodeService" export is defined on the "@/services/barcode/BarcodeService" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Barcode Validation > rejects invalid UPC formats
   → [vitest] No "BarcodeService" export is defined on the "@/services/barcode/BarcodeService" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Barcode Validation > validates EAN-13 format
   → [vitest] No "BarcodeService" export is defined on the "@/services/barcode/BarcodeService" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Barcode Validation > rejects invalid EAN formats
   → [vitest] No "BarcodeService" export is defined on the "@/services/barcode/BarcodeService" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Barcode Validation > detects barcode types correctly
   → [vitest] No "BarcodeService" export is defined on the "@/services/barcode/BarcodeService" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Offline Mode > handles offline barcode lookup gracefully
   → [vitest] No "BarcodeService" export is defined on the "@/services/barcode/BarcodeService" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Offline Mode > returns cache miss when barcode not cached
   → [vitest] No "BarcodeService" export is defined on the "@/services/barcode/BarcodeService" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > API Usage Tracking > tracks API call count
   → [vitest] No "BarcodeService" export is defined on the "@/services/barcode/BarcodeService" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > API Usage Tracking > resets API counter
   → [vitest] No "BarcodeService" export is defined on the "@/services/barcode/BarcodeService" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Cache Management > gets cache statistics
   → [vitest] No "BarcodeService" export is defined on the "@/services/barcode/BarcodeService" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Cache Management > clears cache
   → [vitest] No "BarcodeService" export is defined on the "@/services/barcode/BarcodeService" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 ✓ src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > saveItem > saves firearm item successfully
 ✓ src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > saveItem > saves ammunition item successfully
 ✓ src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > saveItem > throws error for invalid category
 ✓ src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > getItems > retrieves all items for user
 ✓ src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > getItems > returns empty array when no items found
 × src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > updateItem > updates item successfully
   → promise rejected "TypeError: supabase…" instead of resolving
 ✓ src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > valuation methods > saves valuation successfully
 ✓ src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > valuation methods > gets valuation history
 ✓ src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > returns all items when no filters applied
 ✓ src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > filters by category
 ✓ src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > filters by search query
 ✓ src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > filters by caliber
 ✓ src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > returns unique calibers
 ✓ src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > returns unique manufacturers
 × src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > calculates max price correctly
   → expected 10000 to be 1000 // Object.is equality
 ✓ src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > handles empty inventory gracefully
 ✓ src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > filters with advanced price range
 ✓ src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > calculates active filter count
stdout | src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > FirearmsService > should create firearm using createFirearm
[firearm_detailsService] Creating: {
  baseData: {
    name: 'Test Rifle',
    manufacturer_id: 'mfg123',
    model: 'TR-15',
    quantity: 1,
    purchase_date: undefined,
    purchase_price: undefined,
    current_value: undefined,
    storage_location_id: undefined,
    notes: undefined,
    image_url: undefined
  },
  detailData: {
    firearm_type_id: undefined,
    serial_number: '123456',
    caliber_id: 'cal123',
    cartridge_id: undefined,
    barrel_length: undefined,
    overall_length: undefined,
    weight: undefined,
    capacity: undefined,
    action_id: undefined,
    finish: undefined,
    round_count: undefined,
    is_nfa: undefined,
    nfa_item_type: undefined,
    form_4_approved_date: undefined,
    tax_stamp_number: undefined
  }
}

stdout | src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > AmmunitionService > should create ammunition using createAmmunition
[ammunition_detailsService] Creating: {
  baseData: {
    name: 'Test Ammo',
    manufacturer_id: 'mfg123',
    model: undefined,
    quantity: 1,
    purchase_date: undefined,
    purchase_price: undefined,
    current_value: undefined,
    storage_location_id: undefined,
    notes: undefined,
    image_url: undefined
  },
  detailData: {
    caliber_id: 'cal123',
    cartridge_id: undefined,
    bullet_type_id: undefined,
    bullet_weight: undefined,
    muzzle_velocity: undefined,
    rounds_per_box: undefined,
    is_reloaded: undefined,
    brass_condition: undefined
  }
}

stdout | src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > OpticsService > should create optic using createOptic
[optic_detailsService] Creating: {
  baseData: {
    name: 'Test Scope',
    quantity: 1,
    purchase_date: undefined,
    purchase_price: undefined,
    current_value: undefined,
    storage_location_id: undefined,
    notes: undefined,
    image_url: undefined
  },
  detailData: {
    manufacturer_id: 'mfg123',
    model: 'SC-4X',
    magnification: '4x',
    objective_lens: undefined,
    reticle_type_id: undefined,
    turret_type_id: undefined,
    mounting_type_id: undefined,
    fov_id: undefined
  }
}

 ✓ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > FirearmsService > should create firearm using createFirearm
 ✓ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > FirearmsService > should update firearm using updateFirearm
 ✓ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > FirearmsService > should delete firearm
 × src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > FirearmsService > should get firearm by id
   → firearmsService.getById is not a function
 ✓ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > AmmunitionService > should create ammunition using createAmmunition
 ✓ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > AmmunitionService > should update ammunition using updateAmmunition
 ✓ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > AmmunitionService > should delete ammunition
 ✓ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > OpticsService > should create optic using createOptic
 ✓ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > OpticsService > should update optic using updateOptic
 ✓ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > OpticsService > should delete optic
stdout | firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > FirearmsService > should create firearm with required fields
[firearm_detailsService] Creating: {
  baseData: { name: 'Test Rifle', user_id: 'user123' },
  detailData: 'user123'
}

stdout | firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > AmmunitionService > should create ammunition
[ammunition_detailsService] Creating: {
  baseData: { name: 'Test Ammo', user_id: 'user123', caliber_id: 'cal123' },
  detailData: 'user123'
}

stdout | firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > OpticsService > should create optic
[optic_detailsService] Creating: {
  baseData: { name: 'Test Scope', user_id: 'user123' },
  detailData: 'user123'
}

stdout | firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > MagazinesService > should create magazine
[magazine_detailsService] Creating: {
  baseData: { name: 'Test Mag', user_id: 'user123' },
  detailData: 'user123'
}

stdout | firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > AccessoriesService > should create accessory
[accessory_detailsService] Creating: {
  baseData: { name: 'Test Accessory', user_id: 'user123' },
  detailData: 'user123'
}

stdout | firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > SuppressorsService > should create suppressor
[suppressor_detailsService] Creating: {
  baseData: { name: 'Test Suppressor', user_id: 'user123' },
  detailData: 'user123'
}

stdout | firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > ReloadingService > should create reloading component
[reloading_component_detailsService] Creating: {
  baseData: { name: 'Test Component', user_id: 'user123' },
  detailData: 'user123'
}

stdout | firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > CasesService > should create case
[case_detailsService] Creating: {
  baseData: { name: 'Test Case', user_id: 'user123' },
  detailData: 'user123'
}

stdout | firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > PrimersService > should create primer
[primer_detailsService] Creating: {
  baseData: { name: 'Test Primer', user_id: 'user123' },
  detailData: 'user123'
}

 ✓ firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > FirearmsService > should create firearm with required fields
 × firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > FirearmsService > should update firearm
   → Cannot read properties of null (reading 'name')
 ✓ firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > FirearmsService > should delete firearm
 ✓ firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > FirearmsService > should list firearms
 ✓ firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > AmmunitionService > should create ammunition
 ✓ firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > OpticsService > should create optic
 ✓ firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > MagazinesService > should create magazine
 ✓ firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > AccessoriesService > should create accessory
 ✓ firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > SuppressorsService > should create suppressor
 ✓ firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > ReloadingService > should create reloading component
 ✓ firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > CasesService > should create case
 ✓ firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > PrimersService > should create primer
 ✓ firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > PowderService > should create powder
stdout | firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > PowderService > should create powder
[powder_detailsService] Creating: {
  baseData: { name: 'Test Powder', user_id: 'user123' },
  detailData: 'user123'
}

 ↓ src/test/integration/data-migration.test.ts > Data Migration Validation > should have ammunition table with correct schema
 ↓ src/test/integration/data-migration.test.ts > Data Migration Validation > should have bullets table with correct schema
 ↓ src/test/integration/data-migration.test.ts > Data Migration Validation > should have magazines table
 ↓ src/test/integration/data-migration.test.ts > Data Migration Validation > should have accessories table
 ↓ src/test/integration/data-migration.test.ts > Data Migration Validation > should fetch all categories from categories table
 ↓ src/test/integration/data-migration.test.ts > Data Migration Validation > should create ammunition item successfully
 ↓ src/test/integration/data-migration.test.ts > Data Migration Validation > should create magazine item successfully
stdout | firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AmmunitionService.test.ts > AmmunitionService > createAmmunition > should create ammunition with correct field mapping
[ammunition_detailsService] Creating: {
  baseData: {
    name: 'Test Ammo',
    manufacturer_id: 'mfg-456',
    model: '9mm FMJ',
    quantity: 100,
    purchase_date: undefined,
    purchase_price: undefined,
    current_value: undefined,
    storage_location_id: undefined,
    notes: undefined,
    image_url: undefined
  },
  detailData: {
    caliber_id: 'cal-456',
    cartridge_id: 'cart-456',
    bullet_type_id: 'bt-456',
    bullet_weight: 115,
    muzzle_velocity: 1200,
    rounds_per_box: 50,
    is_reloaded: undefined,
    brass_condition: undefined
  }
}

stdout | firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AmmunitionService.test.ts > AmmunitionService > createAmmunition > should use bullet_weight not grain_weight
[ammunition_detailsService] Creating: {
  baseData: {
    name: 'Test Ammo',
    manufacturer_id: 'mfg-456',
    model: '9mm FMJ',
    quantity: 100,
    purchase_date: undefined,
    purchase_price: undefined,
    current_value: undefined,
    storage_location_id: undefined,
    notes: undefined,
    image_url: undefined
  },
  detailData: {
    caliber_id: 'cal-456',
    cartridge_id: 'cart-456',
    bullet_type_id: 'bt-456',
    bullet_weight: 115,
    muzzle_velocity: 1200,
    rounds_per_box: 50,
    is_reloaded: undefined,
    brass_condition: undefined
  }
}

stdout | firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AmmunitionService.test.ts > AmmunitionService > createAmmunition > should include cartridge_id in detail data
[ammunition_detailsService] Creating: {
  baseData: {
    name: 'Test Ammo',
    manufacturer_id: 'mfg-456',
    model: '9mm FMJ',
    quantity: 100,
    purchase_date: undefined,
    purchase_price: undefined,
    current_value: undefined,
    storage_location_id: undefined,
    notes: undefined,
    image_url: undefined
  },
  detailData: {
    caliber_id: 'cal-456',
    cartridge_id: 'cart-456',
    bullet_type_id: 'bt-456',
    bullet_weight: 115,
    muzzle_velocity: 1200,
    rounds_per_box: 50,
    is_reloaded: undefined,
    brass_condition: undefined
  }
}

stdout | firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AmmunitionService.test.ts > AmmunitionService > createAmmunition > should put manufacturer_id in base data not detail data
[ammunition_detailsService] Creating: {
  baseData: {
    name: 'Test Ammo',
    manufacturer_id: 'mfg-456',
    model: '9mm FMJ',
    quantity: 100,
    purchase_date: undefined,
    purchase_price: undefined,
    current_value: undefined,
    storage_location_id: undefined,
    notes: undefined,
    image_url: undefined
  },
  detailData: {
    caliber_id: 'cal-456',
    cartridge_id: 'cart-456',
    bullet_type_id: 'bt-456',
    bullet_weight: 115,
    muzzle_velocity: 1200,
    rounds_per_box: 50,
    is_reloaded: undefined,
    brass_condition: undefined
  }
}

 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AmmunitionService.test.ts > AmmunitionService > createAmmunition > should create ammunition with correct field mapping
 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AmmunitionService.test.ts > AmmunitionService > createAmmunition > should use bullet_weight not grain_weight
 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AmmunitionService.test.ts > AmmunitionService > createAmmunition > should include cartridge_id in detail data
 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AmmunitionService.test.ts > AmmunitionService > createAmmunition > should put manufacturer_id in base data not detail data
 ↓ firearms-inventory-tracking-1 (4)/src/test/integration/data-migration.test.ts > Data Migration Validation > should have ammunition table with correct schema
 ↓ firearms-inventory-tracking-1 (4)/src/test/integration/data-migration.test.ts > Data Migration Validation > should have bullets table with correct schema
 ↓ firearms-inventory-tracking-1 (4)/src/test/integration/data-migration.test.ts > Data Migration Validation > should have magazines table
 ↓ firearms-inventory-tracking-1 (4)/src/test/integration/data-migration.test.ts > Data Migration Validation > should have accessories table
 ↓ firearms-inventory-tracking-1 (4)/src/test/integration/data-migration.test.ts > Data Migration Validation > should fetch all categories from categories table
 ↓ firearms-inventory-tracking-1 (4)/src/test/integration/data-migration.test.ts > Data Migration Validation > should create ammunition item successfully
 ↓ firearms-inventory-tracking-1 (4)/src/test/integration/data-migration.test.ts > Data Migration Validation > should create magazine item successfully
 × src/services/inventory/__tests__/BatchOperationsService.test.ts > BatchOperationsService > bulkCreate > should create multiple items successfully
   → [vitest] No "ammunitionService" export is defined on the "../../category" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/inventory/__tests__/BatchOperationsService.test.ts > BatchOperationsService > bulkCreate > should handle partial failures
   → [vitest] No "ammunitionService" export is defined on the "../../category" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/inventory/__tests__/BatchOperationsService.test.ts > BatchOperationsService > bulkDelete > should delete multiple items
   → [vitest] No "ammunitionService" export is defined on the "../../category" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/inventory/__tests__/BatchOperationsService.test.ts > BatchOperationsService > bulkDuplicate > should duplicate items
   → [vitest] No "ammunitionService" export is defined on the "../../category" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × firearms-inventory-tracking-1 (4)/src/services/inventory/__tests__/BatchOperationsService.test.ts > BatchOperationsService > bulkCreate > should create multiple items successfully
   → [vitest] No "ammunitionService" export is defined on the "../../category" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × firearms-inventory-tracking-1 (4)/src/services/inventory/__tests__/BatchOperationsService.test.ts > BatchOperationsService > bulkCreate > should handle partial failures
   → [vitest] No "ammunitionService" export is defined on the "../../category" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × firearms-inventory-tracking-1 (4)/src/services/inventory/__tests__/BatchOperationsService.test.ts > BatchOperationsService > bulkDelete > should delete multiple items
   → [vitest] No "ammunitionService" export is defined on the "../../category" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × firearms-inventory-tracking-1 (4)/src/services/inventory/__tests__/BatchOperationsService.test.ts > BatchOperationsService > bulkDuplicate > should duplicate items
   → [vitest] No "ammunitionService" export is defined on the "../../category" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

stdout | firearms-inventory-tracking-1 (4)/src/services/category/__tests__/FirearmsService.test.ts > FirearmsService > createFirearm > should create firearm with all fields in correct tables
[firearm_detailsService] Creating: {
  baseData: {
    name: 'Test Firearm',
    manufacturer_id: 'mfg-123',
    model: 'Model X',
    quantity: 1,
    purchase_date: undefined,
    purchase_price: undefined,
    current_value: undefined,
    storage_location_id: undefined,
    notes: undefined,
    image_url: undefined
  },
  detailData: {
    firearm_type_id: 'type-123',
    serial_number: 'SN12345',
    caliber_id: 'cal-123',
    cartridge_id: 'cart-123',
    barrel_length: 16,
    overall_length: undefined,
    weight: undefined,
    capacity: undefined,
    action_id: 'act-123',
    finish: undefined,
    round_count: undefined,
    is_nfa: undefined,
    nfa_item_type: undefined,
    form_4_approved_date: undefined,
    tax_stamp_number: undefined
  }
}

stdout | firearms-inventory-tracking-1 (4)/src/services/category/__tests__/FirearmsService.test.ts > FirearmsService > createFirearm > should use action_id not action text
[firearm_detailsService] Creating: {
  baseData: {
    name: 'Test Firearm',
    manufacturer_id: 'mfg-123',
    model: 'Model X',
    quantity: 1,
    purchase_date: undefined,
    purchase_price: undefined,
    current_value: undefined,
    storage_location_id: undefined,
    notes: undefined,
    image_url: undefined
  },
  detailData: {
    firearm_type_id: 'type-123',
    serial_number: 'SN12345',
    caliber_id: 'cal-123',
    cartridge_id: 'cart-123',
    barrel_length: 16,
    overall_length: undefined,
    weight: undefined,
    capacity: undefined,
    action_id: 'act-123',
    finish: undefined,
    round_count: undefined,
    is_nfa: undefined,
    nfa_item_type: undefined,
    form_4_approved_date: undefined,
    tax_stamp_number: undefined
  }
}

stdout | firearms-inventory-tracking-1 (4)/src/services/category/__tests__/FirearmsService.test.ts > FirearmsService > createFirearm > should include cartridge_id in detail data
[firearm_detailsService] Creating: {
  baseData: {
    name: 'Test Firearm',
    manufacturer_id: 'mfg-123',
    model: 'Model X',
    quantity: 1,
    purchase_date: undefined,
    purchase_price: undefined,
    current_value: undefined,
    storage_location_id: undefined,
    notes: undefined,
    image_url: undefined
  },
  detailData: {
    firearm_type_id: 'type-123',
    serial_number: 'SN12345',
    caliber_id: 'cal-123',
    cartridge_id: 'cart-123',
    barrel_length: 16,
    overall_length: undefined,
    weight: undefined,
    capacity: undefined,
    action_id: 'act-123',
    finish: undefined,
    round_count: undefined,
    is_nfa: undefined,
    nfa_item_type: undefined,
    form_4_approved_date: undefined,
    tax_stamp_number: undefined
  }
}

 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/FirearmsService.test.ts > FirearmsService > createFirearm > should create firearm with all fields in correct tables
 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/FirearmsService.test.ts > FirearmsService > createFirearm > should use action_id not action text
 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/FirearmsService.test.ts > FirearmsService > createFirearm > should include cartridge_id in detail data
stdout | firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > FirearmsService > should create item with inventory + detail tables
[firearm_detailsService] Creating: {
  baseData: {
    name: 'Test Firearms',
    manufacturer: 'Test Mfg',
    model: 'Test Model',
    category: 'firearms'
  },
  detailData: 'test-user-123'
}

stdout | firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > OpticsService > should create item with inventory + detail tables
[optic_detailsService] Creating: {
  baseData: {
    name: 'Test Optics',
    manufacturer: 'Test Mfg',
    model: 'Test Model',
    category: 'optics'
  },
  detailData: 'test-user-123'
}

stdout | firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > SuppressorsService > should create item with inventory + detail tables
[suppressor_detailsService] Creating: {
  baseData: {
    name: 'Test Suppressors',
    manufacturer: 'Test Mfg',
    model: 'Test Model',
    category: 'suppressors'
  },
  detailData: 'test-user-123'
}

stdout | firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > MagazinesService > should create item with inventory + detail tables
[magazine_detailsService] Creating: {
  baseData: {
    name: 'Test Magazines',
    manufacturer: 'Test Mfg',
    model: 'Test Model',
    category: 'magazines'
  },
  detailData: 'test-user-123'
}

stdout | firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > AccessoriesService > should create item with inventory + detail tables
[accessory_detailsService] Creating: {
  baseData: {
    name: 'Test Accessories',
    manufacturer: 'Test Mfg',
    model: 'Test Model',
    category: 'accessories'
  },
  detailData: 'test-user-123'
}

stdout | firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > AmmunitionService > should create item with inventory + detail tables
[ammunition_detailsService] Creating: {
  baseData: {
    name: 'Test Ammunition',
    manufacturer: 'Test Mfg',
    model: 'Test Model',
    category: 'ammunition'
  },
  detailData: 'test-user-123'
}

stdout | firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > CasesService > should create item with inventory + detail tables
[case_detailsService] Creating: {
  baseData: {
    name: 'Test Cases',
    manufacturer: 'Test Mfg',
    model: 'Test Model',
    category: 'cases'
  },
  detailData: 'test-user-123'
}

stdout | firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > PowderService > should create item with inventory + detail tables
[powder_detailsService] Creating: {
  baseData: {
    name: 'Test Powder',
    manufacturer: 'Test Mfg',
    model: 'Test Model',
    category: 'powder'
  },
  detailData: 'test-user-123'
}

stdout | firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > PrimersService > should create item with inventory + detail tables
[primer_detailsService] Creating: {
  baseData: {
    name: 'Test Primers',
    manufacturer: 'Test Mfg',
    model: 'Test Model',
    category: 'primers'
  },
  detailData: 'test-user-123'
}

stdout | firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > ReloadingService > should create item with inventory + detail tables
[reloading_component_detailsService] Creating: {
  baseData: {
    name: 'Test Reloading',
    manufacturer: 'Test Mfg',
    model: 'Test Model',
    category: 'reloading'
  },
  detailData: 'test-user-123'
}

 × firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > FirearmsService > should create item with inventory + detail tables
   → promise rejected "Error: Failed to create inventory item: E…" instead of resolving
 × firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > FirearmsService > should get items by user
   → service.getByUser is not a function
 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > FirearmsService > should update item
 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > FirearmsService > should delete item
 × firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > OpticsService > should create item with inventory + detail tables
   → promise rejected "Error: Failed to create inventory item: E…" instead of resolving
 × firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > OpticsService > should get items by user
   → service.getByUser is not a function
 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > OpticsService > should update item
 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > OpticsService > should delete item
 × firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > SuppressorsService > should create item with inventory + detail tables
   → promise rejected "Error: Failed to create inventory item: E…" instead of resolving
 × firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > SuppressorsService > should get items by user
   → service.getByUser is not a function
 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > SuppressorsService > should update item
 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > SuppressorsService > should delete item
 × firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > MagazinesService > should create item with inventory + detail tables
   → promise rejected "Error: Failed to create inventory item: E…" instead of resolving
 × firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > MagazinesService > should get items by user
   → service.getByUser is not a function
 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > MagazinesService > should update item
 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > MagazinesService > should delete item
 × firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > AccessoriesService > should create item with inventory + detail tables
   → promise rejected "Error: Failed to create inventory item: E…" instead of resolving
 × firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > AccessoriesService > should get items by user
   → service.getByUser is not a function
 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > AccessoriesService > should update item
 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > AccessoriesService > should delete item
 × firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > AmmunitionService > should create item with inventory + detail tables
   → promise rejected "Error: Failed to create inventory item: E…" instead of resolving
 × firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > AmmunitionService > should get items by user
   → service.getByUser is not a function
 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > AmmunitionService > should update item
 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > AmmunitionService > should delete item
 × firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > CasesService > should create item with inventory + detail tables
   → promise rejected "Error: Failed to create inventory item: E…" instead of resolving
 × firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > CasesService > should get items by user
   → service.getByUser is not a function
 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > CasesService > should update item
 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > CasesService > should delete item
 × firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > PowderService > should create item with inventory + detail tables
   → promise rejected "Error: Failed to create inventory item: E…" instead of resolving
 × firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > PowderService > should get items by user
   → service.getByUser is not a function
 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > PowderService > should update item
 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > PowderService > should delete item
 × firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > PrimersService > should create item with inventory + detail tables
   → promise rejected "Error: Failed to create inventory item: E…" instead of resolving
 × firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > PrimersService > should get items by user
   → service.getByUser is not a function
 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > PrimersService > should update item
 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > PrimersService > should delete item
 × firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > ReloadingService > should create item with inventory + detail tables
   → promise rejected "Error: Failed to create inventory item: E…" instead of resolving
 × firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > ReloadingService > should get items by user
   → service.getByUser is not a function
 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > ReloadingService > should update item
 ✓ firearms-inventory-tracking-1 (4)/src/services/category/__tests__/AllCategories.test.ts > All Category Services > ReloadingService > should delete item
 × firearms-inventory-tracking-1 (4)/src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > CRUD Operations > creates new inventory item
   → service.create is not a function
 × firearms-inventory-tracking-1 (4)/src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > CRUD Operations > retrieves inventory item by id
   → service.getById is not a function
 × firearms-inventory-tracking-1 (4)/src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > CRUD Operations > updates inventory item
   → service.update is not a function
 × firearms-inventory-tracking-1 (4)/src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > CRUD Operations > deletes inventory item
   → service.delete is not a function
 × firearms-inventory-tracking-1 (4)/src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > Querying > filters by category
   → service.getByCategory is not a function
 × src/test/integration/api.test.ts > API Integration Tests > REST API Endpoints > fetches inventory items via API
   → apiService.getAll is not a function
 × src/test/integration/api.test.ts > API Integration Tests > REST API Endpoints > creates item via API
   → expected { success: true, data: { id: '1' } } to deeply equal { name: 'New Item', …(1) }
 × src/test/integration/api.test.ts > API Integration Tests > REST API Endpoints > handles API errors gracefully
   → apiService.getAll is not a function
 × src/test/integration/api.test.ts > API Integration Tests > Real-time Subscriptions > subscribes to inventory changes
   → apiService.subscribeToChanges is not a function
 × src/test/integration/api.test.ts > API Integration Tests > Batch Operations > performs batch insert
   → apiService.batchCreate is not a function
stdout | firearms-inventory-tracking-1 (4)/src/test/integration/api.test.ts > API Integration Tests > REST API Endpoints > creates item via API
[firearm_detailsService] Creating: { baseData: undefined, detailData: undefined }

 × firearms-inventory-tracking-1 (4)/src/test/integration/api.test.ts > API Integration Tests > REST API Endpoints > fetches inventory items via API
   → apiService.getAll is not a function
 × firearms-inventory-tracking-1 (4)/src/test/integration/api.test.ts > API Integration Tests > REST API Endpoints > creates item via API
   → expected { success: false, …(1) } to deeply equal { name: 'New Item', …(1) }
 × firearms-inventory-tracking-1 (4)/src/test/integration/api.test.ts > API Integration Tests > REST API Endpoints > handles API errors gracefully
   → apiService.getAll is not a function
 × firearms-inventory-tracking-1 (4)/src/test/integration/api.test.ts > API Integration Tests > Real-time Subscriptions > subscribes to inventory changes
   → apiService.subscribeToChanges is not a function
 × firearms-inventory-tracking-1 (4)/src/test/integration/api.test.ts > API Integration Tests > Batch Operations > performs batch insert
   → apiService.batchCreate is not a function
stdout | firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.test.ts > FirearmsService > should create a firearm with all fields
[firearm_detailsService] Creating: {
  baseData: {
    name: 'Test Rifle',
    manufacturer: 'Test Mfg',
    model: 'Model X',
    serialNumber: '123456',
    caliber: '.308',
    action: 'Bolt Action',
    barrelLength: '24"',
    capacity: 5
  },
  detailData: 'user123'
}

stdout | firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.test.ts > FirearmsService > should validate required fields
[firearm_detailsService] Creating: { baseData: { manufacturer: 'Test Mfg' }, detailData: 'user123' }

 ✓ firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.test.ts > FirearmsService > should create a firearm with all fields
 × firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.test.ts > FirearmsService > should validate required fields
   → promise resolved "{ id: '123', name: 'Test Item' }" instead of rejecting
 ✓ firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.test.ts > AmmunitionService > should create ammunition with round count
stdout | firearms-inventory-tracking-1 (4)/src/services/__tests__/categoryServices.test.ts > AmmunitionService > should create ammunition with round count
[ammunition_detailsService] Creating: {
  baseData: {
    name: 'Test Ammo',
    manufacturer: 'Federal',
    caliber: '.308',
    bulletType: 'FMJ',
    grainWeight: '150gr',
    roundCount: 500
  },
  detailData: 'user123'
}

stdout | src/test/integration/comprehensive-categories.test.ts > Comprehensive Category Integration Tests > Firearms Service Integration > creates firearm with all fields
[firearm_detailsService] Creating: {
  baseData: {
    name: 'Test Rifle',
    manufacturer: 'Test Mfg',
    model: 'TR-15',
    caliber: '5.56mm',
    serial_number: 'TEST123',
    action_type: 'Semi-Auto',
    barrel_length: 16,
    overall_length: 36,
    weight: 7.5,
    capacity: 30
  },
  detailData: undefined
}

stdout | src/test/integration/comprehensive-categories.test.ts > Comprehensive Category Integration Tests > Ammunition Service Integration > creates ammunition with specifications
[ammunition_detailsService] Creating: {
  baseData: {
    name: 'Test Ammo',
    manufacturer: 'Test Ammo Co',
    caliber: '5.56mm',
    grain_weight: 55,
    bullet_type: 'FMJ',
    quantity: 1000,
    rounds_per_box: 20
  },
  detailData: undefined
}

 × src/test/integration/comprehensive-categories.test.ts > Comprehensive Category Integration Tests > Firearms Service Integration > creates firearm with all fields
   → Failed to create inventory item: Error occurred
 × src/test/integration/comprehensive-categories.test.ts > Comprehensive Category Integration Tests > Ammunition Service Integration > creates ammunition with specifications
   → Failed to create inventory item: Error occurred
 ✓ src/test/integration/comprehensive-categories.test.ts > Comprehensive Category Integration Tests > Cross-Category Operations > links firearm with compatible ammunition
 ✓ firearms-inventory-tracking-1 (4)/src/utils/__tests__/csvParser.test.ts > CSV Parser Tests > CSV Parsing > parses simple CSV
 × firearms-inventory-tracking-1 (4)/src/utils/__tests__/csvParser.test.ts > CSV Parser Tests > CSV Parsing > handles quoted fields
   → expected 'Description with quotes' to be 'Description with "quotes"' // Object.is equality
 ✓ firearms-inventory-tracking-1 (4)/src/utils/__tests__/csvParser.test.ts > CSV Parser Tests > CSV Parsing > handles empty fields
 × firearms-inventory-tracking-1 (4)/src/utils/__tests__/csvParser.test.ts > CSV Parser Tests > CSV Parsing > handles line breaks in quoted fields
   → expected 'Line 1' to contain '\n'
 × firearms-inventory-tracking-1 (4)/src/utils/__tests__/csvParser.test.ts > CSV Parser Tests > CSV Header Validation > validates required headers
   → validateCSVHeaders is not a function
 × firearms-inventory-tracking-1 (4)/src/utils/__tests__/csvParser.test.ts > CSV Parser Tests > CSV Header Validation > rejects missing headers
   → validateCSVHeaders is not a function
 × firearms-inventory-tracking-1 (4)/src/utils/__tests__/csvParser.test.ts > CSV Parser Tests > CSV Generation > converts objects to CSV
   → convertToCSV is not a function
 × firearms-inventory-tracking-1 (4)/src/utils/__tests__/csvParser.test.ts > CSV Parser Tests > CSV Generation > escapes special characters
   → convertToCSV is not a function
stdout | firearms-inventory-tracking-1 (4)/src/test/integration/comprehensive-categories.test.ts > Comprehensive Category Integration Tests > Firearms Service Integration > creates firearm with all fields
[firearm_detailsService] Creating: {
  baseData: {
    name: 'Test Rifle',
    manufacturer: 'Test Mfg',
    model: 'TR-15',
    caliber: '5.56mm',
    serial_number: 'TEST123',
    action_type: 'Semi-Auto',
    barrel_length: 16,
    overall_length: 36,
    weight: 7.5,
    capacity: 30
  },
  detailData: undefined
}

stdout | firearms-inventory-tracking-1 (4)/src/test/integration/comprehensive-categories.test.ts > Comprehensive Category Integration Tests > Ammunition Service Integration > creates ammunition with specifications
[ammunition_detailsService] Creating: {
  baseData: {
    name: 'Test Ammo',
    manufacturer: 'Test Ammo Co',
    caliber: '5.56mm',
    grain_weight: 55,
    bullet_type: 'FMJ',
    quantity: 1000,
    rounds_per_box: 20
  },
  detailData: undefined
}

 × firearms-inventory-tracking-1 (4)/src/test/integration/comprehensive-categories.test.ts > Comprehensive Category Integration Tests > Firearms Service Integration > creates firearm with all fields
   → Failed to create inventory item: Error occurred
 × firearms-inventory-tracking-1 (4)/src/test/integration/comprehensive-categories.test.ts > Comprehensive Category Integration Tests > Ammunition Service Integration > creates ammunition with specifications
   → Failed to create inventory item: Error occurred
 ✓ firearms-inventory-tracking-1 (4)/src/test/integration/comprehensive-categories.test.ts > Comprehensive Category Integration Tests > Cross-Category Operations > links firearm with compatible ammunition
 ✓ src/services/__tests__/team.service.test.ts > TeamService > should create team
 ✓ src/services/__tests__/team.service.test.ts > TeamService > should add team member
 ✓ src/services/__tests__/team.service.test.ts > TeamService > should list team members
 ✓ src/services/__tests__/team.service.test.ts > TeamService > should remove team member
 ✓ src/services/__tests__/team.service.test.ts > TeamService > should get teams
 ✓ src/services/__tests__/team.service.test.ts > TeamService > should update team
 ✓ src/services/__tests__/team.service.test.ts > TeamService > should delete team
 × firearms-inventory-tracking-1 (4)/src/utils/__tests__/csvValidator.test.ts > CSV Validator Tests > Row Validation > validates complete row
   → Cannot convert undefined or null to object
 × firearms-inventory-tracking-1 (4)/src/utils/__tests__/csvValidator.test.ts > CSV Validator Tests > Row Validation > detects missing required fields
   → Cannot convert undefined or null to object
 × firearms-inventory-tracking-1 (4)/src/utils/__tests__/csvValidator.test.ts > CSV Validator Tests > Row Validation > validates field types
   → Cannot convert undefined or null to object
 × firearms-inventory-tracking-1 (4)/src/utils/__tests__/csvValidator.test.ts > CSV Validator Tests > Category Validation > accepts valid categories
   → validateCategory is not a function
 × firearms-inventory-tracking-1 (4)/src/utils/__tests__/csvValidator.test.ts > CSV Validator Tests > Category Validation > rejects invalid categories
   → validateCategory is not a function
 × firearms-inventory-tracking-1 (4)/src/utils/__tests__/csvValidator.test.ts > CSV Validator Tests > Numeric Field Validation > validates numeric values
   → validateNumericField is not a function
 × firearms-inventory-tracking-1 (4)/src/utils/__tests__/csvValidator.test.ts > CSV Validator Tests > Numeric Field Validation > rejects non-numeric values
   → validateNumericField is not a function
 × firearms-inventory-tracking-1 (4)/src/utils/__tests__/csvValidator.test.ts > CSV Validator Tests > Date Field Validation > validates ISO date format
   → validateDateField is not a function
 × firearms-inventory-tracking-1 (4)/src/utils/__tests__/csvValidator.test.ts > CSV Validator Tests > Date Field Validation > rejects invalid dates
   → validateDateField is not a function
stdout | src/services/__tests__/sync.service.test.ts > SyncService > should process queue successfully
[SyncService] Sync complete: { success: 0, failed: 0, conflicts: 0 }

stdout | src/services/__tests__/sync.service.test.ts > SyncService > should not process queue if already processing
[SyncService] Sync already in progress

 ✓ src/services/__tests__/sync.service.test.ts > SyncService > should process queue successfully
 ✓ src/services/__tests__/sync.service.test.ts > SyncService > should subscribe to sync status updates
 ✓ src/services/__tests__/sync.service.test.ts > SyncService > should not process queue if already processing
 × firearms-inventory-tracking-1 (4)/src/services/api/__tests__/InventoryAPIService.test.ts > InventoryAPIService > list > should return success response with items
   → expected false to be true // Object.is equality
 × firearms-inventory-tracking-1 (4)/src/services/api/__tests__/InventoryAPIService.test.ts > InventoryAPIService > list > should handle errors gracefully
   → expected '[vitest] No "ammunitionService" expor…' to be 'Database error' // Object.is equality
 × firearms-inventory-tracking-1 (4)/src/services/api/__tests__/InventoryAPIService.test.ts > InventoryAPIService > create > should create item and return success
   → expected false to be true // Object.is equality
 × firearms-inventory-tracking-1 (4)/src/services/api/__tests__/InventoryAPIService.test.ts > InventoryAPIService > delete > should delete item and return success
   → expected false to be true // Object.is equality
 × firearms-inventory-tracking-1 (4)/src/services/__tests__/reports.service.test.ts > ReportService - Comprehensive Tests > PDF Generation > generates inventory PDF report
   → reportService.generatePDF is not a function
 × firearms-inventory-tracking-1 (4)/src/services/__tests__/reports.service.test.ts > ReportService - Comprehensive Tests > PDF Generation > includes images in PDF
   → reportService.generatePDF is not a function
 × firearms-inventory-tracking-1 (4)/src/services/__tests__/reports.service.test.ts > ReportService - Comprehensive Tests > PDF Generation > handles large datasets
   → reportService.generatePDF is not a function
 × firearms-inventory-tracking-1 (4)/src/services/__tests__/reports.service.test.ts > ReportService - Comprehensive Tests > CSV Export > exports inventory to CSV
   → reportService.exportCSV is not a function
 × firearms-inventory-tracking-1 (4)/src/services/__tests__/reports.service.test.ts > ReportService - Comprehensive Tests > CSV Export > handles special characters in CSV
   → reportService.exportCSV is not a function
 ✓ src/services/inventory/__tests__/ModalIntegrationService.test.ts > ModalIntegrationService > saveItem > should route firearms to firearmsService
 ✓ src/services/inventory/__tests__/ModalIntegrationService.test.ts > ModalIntegrationService > saveItem > should route ammunition to ammunitionService
 ✓ src/services/inventory/__tests__/ModalIntegrationService.test.ts > ModalIntegrationService > updateItem > should update firearms correctly
 ✓ firearms-inventory-tracking-1 (4)/src/services/inventory/__tests__/ModalIntegrationService.test.ts > ModalIntegrationService > saveItem > should route firearms to firearmsService
 ✓ firearms-inventory-tracking-1 (4)/src/services/inventory/__tests__/ModalIntegrationService.test.ts > ModalIntegrationService > saveItem > should route ammunition to ammunitionService
 ✓ firearms-inventory-tracking-1 (4)/src/services/inventory/__tests__/ModalIntegrationService.test.ts > ModalIntegrationService > updateItem > should update firearms correctly
stdout | firearms-inventory-tracking-1 (4)/src/services/__tests__/sync.service.test.ts > SyncService - Comprehensive Tests > Conflict Resolution > resolves conflicts using last-write-wins
[ConflictResolver] Resolving conflict: 1 Strategy: { id: '1', updated_at: '2024-01-02', value: 'B' }
[ConflictResolver] Resolving conflict: 1 Strategy: newest-wins

 × firearms-inventory-tracking-1 (4)/src/services/__tests__/sync.service.test.ts > SyncService - Comprehensive Tests > Queue Management > adds items to sync queue
   → syncService.addToQueue is not a function
 × firearms-inventory-tracking-1 (4)/src/services/__tests__/sync.service.test.ts > SyncService - Comprehensive Tests > Queue Management > processes queue in order
   → syncService.addToQueue is not a function
 × firearms-inventory-tracking-1 (4)/src/services/__tests__/sync.service.test.ts > SyncService - Comprehensive Tests > Queue Management > retries failed operations
   → syncService.addToQueue is not a function
 ✓ firearms-inventory-tracking-1 (4)/src/services/__tests__/sync.service.test.ts > SyncService - Comprehensive Tests > Conflict Resolution > detects conflicts between local and remote
 × firearms-inventory-tracking-1 (4)/src/services/__tests__/sync.service.test.ts > SyncService - Comprehensive Tests > Conflict Resolution > resolves conflicts using last-write-wins
   → expected undefined to be 'B' // Object.is equality
 ✓ firearms-inventory-tracking-1 (4)/src/lib/__tests__/errorHandler.test.ts > ErrorHandler - Comprehensive Tests > Error Logging > logs errors with context
 ✓ firearms-inventory-tracking-1 (4)/src/lib/__tests__/errorHandler.test.ts > ErrorHandler - Comprehensive Tests > Error Logging > captures exceptions with Sentry
 × firearms-inventory-tracking-1 (4)/src/lib/__tests__/errorHandler.test.ts > ErrorHandler - Comprehensive Tests > Error Recovery > attempts recovery for network errors
   → ErrorHandler is not a constructor
 × firearms-inventory-tracking-1 (4)/src/lib/__tests__/errorHandler.test.ts > ErrorHandler - Comprehensive Tests > Error Recovery > provides user-friendly error messages
   → ErrorHandler is not a constructor
 × firearms-inventory-tracking-1 (4)/src/lib/__tests__/errorHandler.test.ts > ErrorHandler - Comprehensive Tests > Error Analytics > tracks error frequency
   → ErrorHandler is not a constructor
 × firearms-inventory-tracking-1 (4)/src/lib/__tests__/errorHandler.test.ts > ErrorHandler - Comprehensive Tests > Error Analytics > identifies error patterns
   → ErrorHandler is not a constructor
 × firearms-inventory-tracking-1 (4)/src/hooks/__tests__/useInventoryFilters.enhanced.test.ts > useInventoryFilters - Enhanced Tests > initializes with empty filters
   → Cannot destructure property 'inventory' of 'undefined' as it is undefined.
 × firearms-inventory-tracking-1 (4)/src/hooks/__tests__/useInventoryFilters.enhanced.test.ts > useInventoryFilters - Enhanced Tests > sets category filter
   → Cannot destructure property 'inventory' of 'undefined' as it is undefined.
 × firearms-inventory-tracking-1 (4)/src/hooks/__tests__/useInventoryFilters.enhanced.test.ts > useInventoryFilters - Enhanced Tests > filters items by category
   → Cannot destructure property 'inventory' of 'undefined' as it is undefined.
 × firearms-inventory-tracking-1 (4)/src/hooks/__tests__/useInventoryFilters.enhanced.test.ts > useInventoryFilters - Enhanced Tests > clears all filters
   → Cannot destructure property 'inventory' of 'undefined' as it is undefined.
 × firearms-inventory-tracking-1 (4)/src/hooks/__tests__/useInventoryFilters.enhanced.test.ts > useInventoryFilters - Enhanced Tests > applies multiple filters simultaneously
   → Cannot destructure property 'inventory' of 'undefined' as it is undefined.
 × firearms-inventory-tracking-1 (4)/src/services/__tests__/team.service.test.ts > Team Collaboration Tests > Team Invitations > creates team invitation
   → invitationService.createInvitation is not a function
 × firearms-inventory-tracking-1 (4)/src/services/__tests__/team.service.test.ts > Team Collaboration Tests > Team Invitations > validates invitation token
   → invitationService.validateToken is not a function
 × firearms-inventory-tracking-1 (4)/src/services/__tests__/team.service.test.ts > Team Collaboration Tests > Team Invitations > accepts invitation
   → invitationService.acceptInvitation is not a function
 × firearms-inventory-tracking-1 (4)/src/services/__tests__/team.service.test.ts > Team Collaboration Tests > Permissions > checks user permissions
   → teamService.hasPermission is not a function
 × firearms-inventory-tracking-1 (4)/src/services/__tests__/team.service.test.ts > Team Collaboration Tests > Permissions > grants permissions to team member
   → teamService.grantPermission is not a function
stdout | src/services/__tests__/categoryServices.test.ts > FirearmsService > should create a firearm using createFirearm method
[firearm_detailsService] Creating: {
  baseData: {
    name: 'Test Rifle',
    manufacturer_id: 'mfg123',
    model: 'TR-15',
    quantity: 1,
    purchase_date: undefined,
    purchase_price: undefined,
    current_value: undefined,
    storage_location_id: undefined,
    notes: undefined,
    image_url: undefined
  },
  detailData: {
    firearm_type_id: undefined,
    serial_number: '123456',
    caliber_id: 'cal123',
    cartridge_id: undefined,
    barrel_length: undefined,
    overall_length: undefined,
    weight: undefined,
    capacity: undefined,
    action_id: undefined,
    finish: undefined,
    round_count: undefined,
    is_nfa: undefined,
    nfa_item_type: undefined,
    form_4_approved_date: undefined,
    tax_stamp_number: undefined
  }
}

stdout | src/services/__tests__/categoryServices.test.ts > AmmunitionService > should create ammunition using createAmmunition method
[ammunition_detailsService] Creating: {
  baseData: {
    name: 'Test Ammo',
    manufacturer_id: 'mfg123',
    model: undefined,
    quantity: 1,
    purchase_date: undefined,
    purchase_price: undefined,
    current_value: undefined,
    storage_location_id: undefined,
    notes: undefined,
    image_url: undefined
  },
  detailData: {
    caliber_id: 'cal123',
    cartridge_id: undefined,
    bullet_type_id: undefined,
    bullet_weight: undefined,
    muzzle_velocity: undefined,
    rounds_per_box: undefined,
    is_reloaded: undefined,
    brass_condition: undefined
  }
}

 × src/services/__tests__/categoryServices.test.ts > FirearmsService > should create a firearm using createFirearm method
   → Failed to create inventory item: undefined
 × src/services/__tests__/categoryServices.test.ts > FirearmsService > should update a firearm using updateFirearm method
   → supabase.from(...).update is not a function
 × src/services/__tests__/categoryServices.test.ts > AmmunitionService > should create ammunition using createAmmunition method
   → Failed to create inventory item: undefined
 × firearms-inventory-tracking-1 (4)/src/hooks/__tests__/useSwipeGesture.test.ts > useSwipeGesture Hook Tests > detects swipe left
   → result.current.handleTouchStart is not a function
 × firearms-inventory-tracking-1 (4)/src/hooks/__tests__/useSwipeGesture.test.ts > useSwipeGesture Hook Tests > detects swipe right
   → result.current.handleTouchStart is not a function
 × firearms-inventory-tracking-1 (4)/src/hooks/__tests__/useSwipeGesture.test.ts > useSwipeGesture Hook Tests > requires minimum swipe distance
   → result.current.handleTouchStart is not a function
 × firearms-inventory-tracking-1 (4)/src/hooks/__tests__/useSwipeGesture.test.ts > useSwipeGesture Hook Tests > handles vertical swipes
   → result.current.handleTouchStart is not a function
 ✓ firearms-inventory-tracking-1 (4)/src/hooks/__tests__/usePullToRefresh.test.ts > usePullToRefresh Hook Tests > initializes pull-to-refresh
 × firearms-inventory-tracking-1 (4)/src/hooks/__tests__/usePullToRefresh.test.ts > usePullToRefresh Hook Tests > triggers refresh on pull gesture
   → result.current.handleTouchStart is not a function
 × firearms-inventory-tracking-1 (4)/src/hooks/__tests__/usePullToRefresh.test.ts > usePullToRefresh Hook Tests > shows loading state during refresh
   → result.current.handleTouchStart is not a function
 ✓ firearms-inventory-tracking-1 (4)/src/hooks/__tests__/usePullToRefresh.test.ts > usePullToRefresh Hook Tests > handles iOS-specific behavior
 × firearms-inventory-tracking-1 (4)/src/components/__tests__/PhotoCapture.test.tsx > PhotoCapture Component > renders photo capture button
   → Found multiple elements with the text: /capture/i

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<h2[39m
  [33mclass[39m=[32m"text-white text-lg font-bold"[39m
[36m>[39m
  [0m📸 Capture Photo [v2.0 UPDATED][0m
[36m</h2>[39m

Ignored nodes: comments, script, style
[36m<button[39m
  [33mclass[39m=[32m"flex-1 bg-yellow-600 disabled:bg-slate-700 text-white py-2 rounded font-semibold"[39m
  [33mdisabled[39m=[32m""[39m
[36m>[39m
  [0m📷 Capture[0m
[36m</button>[39m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"fixed inset-0 bg-black z-50 flex flex-col"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex justify-between items-center p-3 bg-slate-900 border-b-2 border-green-500"[39m
      [36m>[39m
        [36m<h2[39m
          [33mclass[39m=[32m"text-white text-lg font-bold"[39m
        [36m>[39m
          [0m📸 Capture Photo [v2.0 UPDATED][0m
        [36m</h2>[39m
        [36m<button[39m
          [33mclass[39m=[32m"text-white text-2xl font-bold hover:text-red-500"[39m
        [36m>[39m
          [0m×[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 relative flex items-center justify-center bg-black"[39m
      [36m>[39m
        [36m<video[39m
          [33mautoplay[39m=[32m""[39m
          [33mclass[39m=[32m"max-w-full max-h-full object-contain"[39m
          [33mplaysinline[39m=[32m""[39m
        [36m/>[39m
        [36m<canvas[39m
          [33mclass[39m=[32m"hidden"[39m
        [36m/>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-3 bg-slate-900 flex gap-2"[39m
      [36m>[39m
        [36m<button[39m
          [33mclass[39m=[32m"flex-1 bg-yellow-600 disabled:bg-slate-700 text-white py-2 rounded font-semibold"[39m
          [33mdisabled[39m=[32m""[39m
        [36m>[39m
          [0m📷 Capture[0m
        [36m</button>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 × firearms-inventory-tracking-1 (4)/src/components/__tests__/PhotoCapture.test.tsx > PhotoCapture Component > requests camera permissions
   → Found multiple elements with the text: /capture/i

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<h2[39m
  [33mclass[39m=[32m"text-white text-lg font-bold"[39m
[36m>[39m
  [0m📸 Capture Photo [v2.0 UPDATED][0m
[36m</h2>[39m

Ignored nodes: comments, script, style
[36m<button[39m
  [33mclass[39m=[32m"flex-1 bg-yellow-600 disabled:bg-slate-700 text-white py-2 rounded font-semibold"[39m
  [33mdisabled[39m=[32m""[39m
[36m>[39m
  [0m📷 Capture[0m
[36m</button>[39m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"fixed inset-0 bg-black z-50 flex flex-col"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex justify-between items-center p-3 bg-slate-900 border-b-2 border-green-500"[39m
      [36m>[39m
        [36m<h2[39m
          [33mclass[39m=[32m"text-white text-lg font-bold"[39m
        [36m>[39m
          [0m📸 Capture Photo [v2.0 UPDATED][0m
        [36m</h2>[39m
        [36m<button[39m
          [33mclass[39m=[32m"text-white text-2xl font-bold hover:text-red-500"[39m
        [36m>[39m
          [0m×[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 relative flex items-center justify-center bg-black"[39m
      [36m>[39m
        [36m<video[39m
          [33mautoplay[39m=[32m""[39m
          [33mclass[39m=[32m"max-w-full max-h-full object-contain"[39m
          [33mplaysinline[39m=[32m""[39m
        [36m/>[39m
        [36m<canvas[39m
          [33mclass[39m=[32m"hidden"[39m
        [36m/>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-3 bg-slate-900 flex gap-2"[39m
      [36m>[39m
        [36m<button[39m
          [33mclass[39m=[32m"flex-1 bg-yellow-600 disabled:bg-slate-700 text-white py-2 rounded font-semibold"[39m
          [33mdisabled[39m=[32m""[39m
        [36m>[39m
          [0m📷 Capture[0m
        [36m</button>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 × firearms-inventory-tracking-1 (4)/src/components/__tests__/PhotoCapture.test.tsx > PhotoCapture Component > handles camera permission denial
   → Found multiple elements with the text: /capture/i

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<h2[39m
  [33mclass[39m=[32m"text-white text-lg font-bold"[39m
[36m>[39m
  [0m📸 Capture Photo [v2.0 UPDATED][0m
[36m</h2>[39m

Ignored nodes: comments, script, style
[36m<button[39m
  [33mclass[39m=[32m"flex-1 bg-yellow-600 disabled:bg-slate-700 text-white py-2 rounded font-semibold"[39m
  [33mdisabled[39m=[32m""[39m
[36m>[39m
  [0m📷 Capture[0m
[36m</button>[39m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"fixed inset-0 bg-black z-50 flex flex-col"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex justify-between items-center p-3 bg-slate-900 border-b-2 border-green-500"[39m
      [36m>[39m
        [36m<h2[39m
          [33mclass[39m=[32m"text-white text-lg font-bold"[39m
        [36m>[39m
          [0m📸 Capture Photo [v2.0 UPDATED][0m
        [36m</h2>[39m
        [36m<button[39m
          [33mclass[39m=[32m"text-white text-2xl font-bold hover:text-red-500"[39m
        [36m>[39m
          [0m×[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 relative flex items-center justify-center bg-black"[39m
      [36m>[39m
        [36m<video[39m
          [33mautoplay[39m=[32m""[39m
          [33mclass[39m=[32m"max-w-full max-h-full object-contain"[39m
          [33mplaysinline[39m=[32m""[39m
        [36m/>[39m
        [36m<canvas[39m
          [33mclass[39m=[32m"hidden"[39m
        [36m/>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-3 bg-slate-900 flex gap-2"[39m
      [36m>[39m
        [36m<button[39m
          [33mclass[39m=[32m"flex-1 bg-yellow-600 disabled:bg-slate-700 text-white py-2 rounded font-semibold"[39m
          [33mdisabled[39m=[32m""[39m
        [36m>[39m
          [0m📷 Capture[0m
        [36m</button>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ✓ firearms-inventory-tracking-1 (4)/src/components/__tests__/PhotoCapture.test.tsx > PhotoCapture Component > detects iOS devices
stdout | firearms-inventory-tracking-1 (4)/src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Offline Mode > handles offline barcode lookup gracefully
[BarcodeService] Looking up barcode: 012345678905

 × firearms-inventory-tracking-1 (4)/src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Barcode Validation > validates UPC-A format (12 digits)
   → service.isValidUPC is not a function
 × firearms-inventory-tracking-1 (4)/src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Barcode Validation > rejects invalid UPC formats
   → service.isValidUPC is not a function
 × firearms-inventory-tracking-1 (4)/src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Barcode Validation > validates EAN-13 format
   → service.isValidEAN is not a function
 × firearms-inventory-tracking-1 (4)/src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Barcode Validation > detects barcode types correctly
   → service.detectBarcodeType is not a function
 × firearms-inventory-tracking-1 (4)/src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Offline Mode > handles offline barcode lookup gracefully
   → Cannot set properties of undefined (setting 'onerror')
 × firearms-inventory-tracking-1 (4)/src/utils/__tests__/barcodeUtils.test.ts > Barcode Utilities Tests > UPC Validation > validates correct UPC-A
   → validateUPC is not a function
 × firearms-inventory-tracking-1 (4)/src/utils/__tests__/barcodeUtils.test.ts > Barcode Utilities Tests > UPC Validation > rejects invalid UPC length
   → validateUPC is not a function
 × firearms-inventory-tracking-1 (4)/src/utils/__tests__/barcodeUtils.test.ts > Barcode Utilities Tests > UPC Validation > rejects non-numeric UPC
   → validateUPC is not a function
 × firearms-inventory-tracking-1 (4)/src/utils/__tests__/barcodeUtils.test.ts > Barcode Utilities Tests > UPC Validation > validates UPC check digit
   → validateUPC is not a function
 × firearms-inventory-tracking-1 (4)/src/utils/__tests__/barcodeUtils.test.ts > Barcode Utilities Tests > EAN Validation > validates correct EAN-13
   → validateEAN is not a function
 × firearms-inventory-tracking-1 (4)/src/utils/__tests__/barcodeUtils.test.ts > Barcode Utilities Tests > EAN Validation > rejects invalid EAN length
   → validateEAN is not a function
 × firearms-inventory-tracking-1 (4)/src/utils/__tests__/barcodeUtils.test.ts > Barcode Utilities Tests > Check Digit Calculation > calculates UPC check digit
   → calculateCheckDigit is not a function
 × firearms-inventory-tracking-1 (4)/src/utils/__tests__/barcodeUtils.test.ts > Barcode Utilities Tests > Check Digit Calculation > calculates EAN check digit
   → calculateCheckDigit is not a function
 × firearms-inventory-tracking-1 (4)/src/utils/__tests__/barcodeUtils.test.ts > Barcode Utilities Tests > Barcode Formatting > formats UPC with spaces
   → expected '0-12345-67890-5' to be '0 12345 67890 5' // Object.is equality
 × firearms-inventory-tracking-1 (4)/src/utils/__tests__/barcodeUtils.test.ts > Barcode Utilities Tests > Barcode Formatting > formats EAN with dashes
   → expected '590-1-23412-3457' to be '590-1234-12345-7' // Object.is equality
 ✓ src/utils/__tests__/csvValidator.test.ts > csvValidator > validateCSVRow > validates row with all required fields
 × src/utils/__tests__/csvValidator.test.ts > csvValidator > validateCSVRow > rejects row with missing required fields
   → expected true to be false // Object.is equality
 × src/utils/__tests__/csvValidator.test.ts > csvValidator > validateCSVRow > validates numeric fields
   → expected true to be false // Object.is equality
 × src/utils/__tests__/csvValidator.test.ts > csvValidator > validateCSVHeaders > validates correct headers
   → expected undefined to be true // Object.is equality
 × src/utils/__tests__/csvValidator.test.ts > csvValidator > validateCSVHeaders > rejects missing required headers
   → expected undefined to be false // Object.is equality
stdout | src/services/category/__tests__/FirearmsService.test.ts > FirearmsService > should create firearm with correct fields
[firearm_detailsService] Creating: {
  baseData: { name: 'Test Rifle', manufacturer_id: 'mfg-123' },
  detailData: { serial_number: '123456', caliber_id: 'cal-123' }
}

stdout | src/services/category/__tests__/FirearmsService.test.ts > FirearmsService > should handle serial numbers
[firearm_detailsService] Creating: {
  baseData: { name: 'Test Pistol' },
  detailData: { serial_number: 'ABC123' }
}

 × src/services/category/__tests__/FirearmsService.test.ts > FirearmsService > should create firearm with correct fields
   → Failed to create inventory item: undefined
 × src/services/category/__tests__/FirearmsService.test.ts > FirearmsService > should handle serial numbers
   → Failed to create inventory item: undefined
stdout | src/services/category/__tests__/AmmunitionService.test.ts > AmmunitionService > createAmmunition > should create ammunition with correct fields
[ammunition_detailsService] Creating: {
  baseData: { name: 'Test Ammo', manufacturer_id: 'mfg-456' },
  detailData: { caliber_id: 'cal-456', bullet_weight: 115 }
}

stdout | src/services/category/__tests__/AmmunitionService.test.ts > AmmunitionService > createAmmunition > should handle bullet weight
[ammunition_detailsService] Creating: { baseData: { name: 'Test Ammo' }, detailData: { bullet_weight: 115 } }

 × src/services/category/__tests__/AmmunitionService.test.ts > AmmunitionService > createAmmunition > should create ammunition with correct fields
   → Failed to create inventory item: undefined
 × src/services/category/__tests__/AmmunitionService.test.ts > AmmunitionService > createAmmunition > should handle bullet weight
   → Failed to create inventory item: undefined
 ✓ src/services/category/__tests__/AllCategories.test.ts > All Category Services > firearms service is defined
 ✓ src/services/category/__tests__/AllCategories.test.ts > All Category Services > ammunition service is defined
 ✓ src/services/category/__tests__/AllCategories.test.ts > All Category Services > optics service is defined
 ✓ src/services/category/__tests__/AllCategories.test.ts > All Category Services > all services have create method
 ✓ src/services/__tests__/reference.service.test.ts > ReferenceDataService > getManufacturers > fetches manufacturers
 ✓ src/services/__tests__/reference.service.test.ts > ReferenceDataService > getCalibers > fetches calibers
 × src/services/__tests__/reference.service.test.ts > ReferenceDataService > addManufacturer > adds new manufacturer
   → service.addManufacturer is not a function
 × src/lib/__tests__/validation.test.ts > validation utilities > validateEmail > validates correct email
   → validateEmail is not a function
 × src/lib/__tests__/validation.test.ts > validation utilities > validateEmail > rejects invalid email
   → validateEmail is not a function
 × src/lib/__tests__/validation.test.ts > validation utilities > validatePhone > validates US phone number
   → validatePhone is not a function
 × src/lib/__tests__/validation.test.ts > validation utilities > validatePhone > rejects invalid phone
   → validatePhone is not a function
 × src/lib/__tests__/validation.test.ts > validation utilities > validateURL > validates correct URL
   → validateURL is not a function
 × src/lib/__tests__/validation.test.ts > validation utilities > validateURL > rejects invalid URL
   → validateURL is not a function
 × src/lib/__tests__/validation.test.ts > validation utilities > validateRequired > validates non-empty value
   → validateRequired is not a function
 × src/lib/__tests__/validation.test.ts > validation utilities > validateRequired > rejects empty value
   → validateRequired is not a function
 × src/services/__tests__/storage.service.test.ts > StorageService > uploadFile > uploads file successfully
   → [vitest] No "StorageService" export is defined on the "@/services/storage.service" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/__tests__/storage.service.test.ts > StorageService > deleteFile > deletes file successfully
   → [vitest] No "StorageService" export is defined on the "@/services/storage.service" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/__tests__/storage.service.test.ts > StorageService > listFiles > lists files successfully
   → [vitest] No "StorageService" export is defined on the "@/services/storage.service" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/__tests__/inventory.service.test.ts > InventoryService > should save firearm item
   → Category "firearms" not found. Please select a valid category.
 ✓ src/services/__tests__/inventory.service.test.ts > InventoryService > should handle item creation
