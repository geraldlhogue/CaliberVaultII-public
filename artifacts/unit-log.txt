
 RUN  v2.1.9 /Users/ghogue/Library/CloudStorage/OneDrive-InsightfulOutcomes,LLC/IS-LTD/APPS/CaliberVaultII

 ✓ src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > saveItem > saves firearm item successfully
 ✓ src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > saveItem > saves ammunition item successfully
 ✓ src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > saveItem > throws error for invalid category
 ✓ src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > getItems > retrieves all items for user
 ✓ src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > getItems > returns empty array when no items found
 × src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > updateItem > updates item successfully
   → promise rejected "TypeError: supabase…" instead of resolving
 ✓ src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > valuation methods > saves valuation successfully
 ✓ src/services/__tests__/inventory.service.enhanced.test.ts > InventoryService - Enhanced Tests > valuation methods > gets valuation history
stdout | src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > FirearmsService > should create firearm using createFirearm
[firearm_detailsService] Creating: {
  baseData: {
    name: 'Test Rifle',
    manufacturer_id: 'mfg123',
    model: 'TR-15',
    quantity: 1,
    purchase_date: undefined,
    purchase_price: undefined,
    current_value: undefined,
    storage_location_id: undefined,
    notes: undefined,
    image_url: undefined
  },
  detailData: {
    firearm_type_id: undefined,
    serial_number: '123456',
    caliber_id: 'cal123',
    cartridge_id: undefined,
    barrel_length: undefined,
    overall_length: undefined,
    weight: undefined,
    capacity: undefined,
    action_id: undefined,
    finish: undefined,
    round_count: undefined,
    is_nfa: undefined,
    nfa_item_type: undefined,
    form_4_approved_date: undefined,
    tax_stamp_number: undefined
  }
}

stdout | src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > AmmunitionService > should create ammunition using createAmmunition
[ammunition_detailsService] Creating: {
  baseData: {
    name: 'Test Ammo',
    manufacturer_id: 'mfg123',
    model: undefined,
    quantity: 1,
    purchase_date: undefined,
    purchase_price: undefined,
    current_value: undefined,
    storage_location_id: undefined,
    notes: undefined,
    image_url: undefined
  },
  detailData: {
    caliber_id: 'cal123',
    cartridge_id: undefined,
    bullet_type_id: undefined,
    bullet_weight: undefined,
    muzzle_velocity: undefined,
    rounds_per_box: undefined,
    is_reloaded: undefined,
    brass_condition: undefined
  }
}

stdout | src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > OpticsService > should create optic using createOptic
[optic_detailsService] Creating: {
  baseData: {
    name: 'Test Scope',
    quantity: 1,
    purchase_date: undefined,
    purchase_price: undefined,
    current_value: undefined,
    storage_location_id: undefined,
    notes: undefined,
    image_url: undefined
  },
  detailData: {
    manufacturer_id: 'mfg123',
    model: 'SC-4X',
    magnification: '4x',
    objective_lens: undefined,
    reticle_type_id: undefined,
    turret_type_id: undefined,
    mounting_type_id: undefined,
    fov_id: undefined
  }
}

 ✓ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > FirearmsService > should create firearm using createFirearm
 ✓ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > FirearmsService > should update firearm using updateFirearm
 ✓ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > FirearmsService > should delete firearm
 ✓ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > FirearmsService > should get firearm by id
 ✓ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > AmmunitionService > should create ammunition using createAmmunition
 ✓ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > AmmunitionService > should update ammunition using updateAmmunition
 ✓ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > AmmunitionService > should delete ammunition
 ✓ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > OpticsService > should create optic using createOptic
 ✓ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > OpticsService > should update optic using updateOptic
 ✓ src/services/__tests__/categoryServices.comprehensive.test.ts > Category Services - Comprehensive Tests > OpticsService > should delete optic
 ✓ src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > returns all items when no filters applied
 ✓ src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > filters by category
 ✓ src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > filters by search query
 ✓ src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > filters by caliber
 ✓ src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > returns unique calibers
 ✓ src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > returns unique manufacturers
 × src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > calculates max price correctly
   → expected 10000 to be 1000 // Object.is equality
 ✓ src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > handles empty inventory gracefully
 ✓ src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > filters with advanced price range
 ✓ src/hooks/__tests__/useInventoryFilters.test.ts > useInventoryFilters > calculates active filter count
 × src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Barcode Validation > validates UPC-A format (12 digits)
   → [vitest] No "BarcodeService" export is defined on the "@/services/barcode/BarcodeService" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Barcode Validation > validates UPC-E format (13 digits)
   → [vitest] No "BarcodeService" export is defined on the "@/services/barcode/BarcodeService" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Barcode Validation > rejects invalid UPC formats
   → [vitest] No "BarcodeService" export is defined on the "@/services/barcode/BarcodeService" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Barcode Validation > validates EAN-13 format
   → [vitest] No "BarcodeService" export is defined on the "@/services/barcode/BarcodeService" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Barcode Validation > rejects invalid EAN formats
   → [vitest] No "BarcodeService" export is defined on the "@/services/barcode/BarcodeService" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Barcode Validation > detects barcode types correctly
   → [vitest] No "BarcodeService" export is defined on the "@/services/barcode/BarcodeService" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Offline Mode > handles offline barcode lookup gracefully
   → [vitest] No "BarcodeService" export is defined on the "@/services/barcode/BarcodeService" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Offline Mode > returns cache miss when barcode not cached
   → [vitest] No "BarcodeService" export is defined on the "@/services/barcode/BarcodeService" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > API Usage Tracking > tracks API call count
   → [vitest] No "BarcodeService" export is defined on the "@/services/barcode/BarcodeService" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > API Usage Tracking > resets API counter
   → [vitest] No "BarcodeService" export is defined on the "@/services/barcode/BarcodeService" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Cache Management > gets cache statistics
   → [vitest] No "BarcodeService" export is defined on the "@/services/barcode/BarcodeService" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/__tests__/barcode.service.comprehensive.test.ts > BarcodeService - Comprehensive Tests > Cache Management > clears cache
   → [vitest] No "BarcodeService" export is defined on the "@/services/barcode/BarcodeService" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 ↓ src/test/integration/data-migration.test.ts > Data Migration Validation > should have ammunition table with correct schema
 ↓ src/test/integration/data-migration.test.ts > Data Migration Validation > should have bullets table with correct schema
 ↓ src/test/integration/data-migration.test.ts > Data Migration Validation > should have magazines table
 ↓ src/test/integration/data-migration.test.ts > Data Migration Validation > should have accessories table
 ↓ src/test/integration/data-migration.test.ts > Data Migration Validation > should fetch all categories from categories table
 ↓ src/test/integration/data-migration.test.ts > Data Migration Validation > should create ammunition item successfully
 ↓ src/test/integration/data-migration.test.ts > Data Migration Validation > should create magazine item successfully
 × src/services/inventory/__tests__/BatchOperationsService.test.ts > BatchOperationsService > bulkCreate > should create multiple items successfully
   → [vitest] No "ammunitionService" export is defined on the "../../category" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/inventory/__tests__/BatchOperationsService.test.ts > BatchOperationsService > bulkCreate > should handle partial failures
   → [vitest] No "ammunitionService" export is defined on the "../../category" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/inventory/__tests__/BatchOperationsService.test.ts > BatchOperationsService > bulkDelete > should delete multiple items
   → [vitest] No "ammunitionService" export is defined on the "../../category" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

 × src/services/inventory/__tests__/BatchOperationsService.test.ts > BatchOperationsService > bulkDuplicate > should duplicate items
   → [vitest] No "ammunitionService" export is defined on the "../../category" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

